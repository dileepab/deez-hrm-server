(this["webpackJsonpdeez-web"]=this["webpackJsonpdeez-web"]||[]).push([[0],{173:function(e,t,a){e.exports=a(294)},178:function(e,t,a){},224:function(e,t){},226:function(e,t){},272:function(e,t){e.exports="data:image/png;base64,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"},294:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(26),s=a.n(l),o=a(8),c=a(9),i=a(11),m=a(10),d=a(12),u=a(23),h=a(47),p=(a(114),a(178),a(179),a(310)),E=a(300),f=a(311),g=a(157),y=a(306),b=a(299),v=a(35),C=a(6),O=a(19),A=a(307),S=a(158),w=a(305);function k(){var e=x.currentUserValue;return e&&e.token?{Authorization:"Bearer ".concat(e.token),"Content-Type":"application/json"}:{"Content-Type":"application/json"}}var D=a(15);function T(e){return e.text().then((function(t){var a=t&&JSON.parse(t);if(!e.ok){-1!==[401,403].indexOf(e.status)&&x.logout();var n=a&&a.error&&a.error.message||e.statusText;return function(e){D.b.error(e)}(n),Promise.reject(n)}return a}))}var M=a(29),N=Object(M.a)(),I="http://deez.lk:3000",j=new w.a(JSON.parse(localStorage.getItem("currentUser"))),x={login:function(e,t){var a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})};return fetch("".concat(I,"/users/login"),a).then(T).then((function(e){return function(e){var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}};return fetch("".concat(I,"/users/me"),t).then(T).then((function(t){return t=Object(C.a)({},t,{token:e})}))}(e.token).then((function(e){return localStorage.setItem("currentUser",JSON.stringify(e)),j.next(e),e}))}))},logout:function(){N.replace("/sign-in"),localStorage.removeItem("currentUser"),j.next(null)},currentUser:j.asObservable(),get currentUserValue(){return j.value}};var F={getOperatorWithOperations:function(){var e=new Date,t=new Date(e);t.setMonth(t.getMonth()-1);var a=new Date(t.getFullYear(),t.getMonth(),1);console.log(a.toUTCString());var n={method:"GET",headers:k()};return fetch("".concat(I,'/operators?filter=\n  {\n    "include": [\n      {\n        "relation": "operatorSteps",\n        "scope": {\n          "where": {\n            "completeTime": {\n              "gte": [\n                "').concat(a.toUTCString(),'"\n              ]\n            }\n          },\n          "order": [\n            "id desc"\n          ],\n          "fields": {\n            "id": "true",\n            "stepId": "true",\n            "operatorId": "true",\n            "completeTime": "true",\n            "quantity": "true"\n          },\n          "include": [\n            {\n              "relation": "step",\n              "scope": {\n                "fields": {\n                  "id": "true",\n                  "name": "true",\n                  "estimatedTime": "true",\n                  "designId": "true"\n                }\n              }\n            }\n          ]\n        }\n      }\n    ]\n  }'),n).then(T)},getOperators:function(){var e={method:"GET",headers:k()};return fetch("".concat(I,"/operators"),e).then(T)},addOperator:function(e){var t={method:"POST",headers:k(),body:JSON.stringify(e)};return fetch("".concat(I,"/operators"),t).then(T)},editOperator:function(e,t){var a={method:"PATCH",headers:k(),body:JSON.stringify(t)};return fetch("".concat(I,"/operators/").concat(e),a).then(T)},updateOperatorSteps:function(e,t){var a={method:"PATCH",headers:k(),body:JSON.stringify(t)};return fetch("".concat(I,"/operator-steps/").concat(e),a).then(T)},deleteOperator:function(e){var t={method:"DELETE",headers:k()};return fetch("".concat(I,"/operators/").concat(e),t).then(T)},fetchDesigns:function(){var e={method:"GET",headers:k()};return fetch("".concat(I,'/designs?filter={"where":{"isComplete": false},"order": ["id desc"],"include": [{"relation": "steps"}]}'),e).then(T)},addOperatorOperations:function(e){var t={method:"POST",headers:k(),body:JSON.stringify(e)};return fetch("".concat(I,"/operator-steps"),t).then(T)}};var P={getAllDesigns:function(e){var t={method:"GET",headers:k()};return fetch("".concat(I,"/designs?filter={").concat("incomplete"===e?'"where":{"isComplete": false},':"complete"===e?'"where":{"isComplete": true},':"",'"order": ["id desc"],"include": [{"relation": "steps", "scope":{"include": [{"relation": "operatorSteps", "order": ["id desc"]}]}}]}'),t).then(T)},getLastTwoMonthsAllDesigns:function(){var e=new Date,t=new Date(e);t.setMonth(t.getMonth()-3);var a=new Date(t.getFullYear(),t.getMonth(),1),n={method:"GET",headers:k()};return fetch("".concat(I,'/designs?filter={\n          "where": {\n            "startTime": {\n              "gte": [\n                "').concat(a.toUTCString(),'"\n              ]\n            }\n          },"order": ["id desc"],"include": [{"relation": "steps",\n        "scope": {\n          "fields": {\n            "id": "true",\n            "estimatedTime": "true",\n            "designId": "true"\n          },\n          "include": [{"relation": "operatorSteps", "order": ["id desc"]}]\n        }}]}'),n).then(T)},getAllDesignsWithOperator:function(){var e={method:"GET",headers:k()};return fetch("".concat(I,'/designs?filter={"order": ["id desc"],"include": [{"relation": "steps", "scope":{"include": [{"relation": "operatorSteps", "scope":{"include": [{"relation": "operator"}]}}]}}]}'),e).then(T)},getIncompleteDesignsWithOperations:function(){var e={method:"GET",headers:k()};return fetch("".concat(I,'/designs?filter={"where":{"isComplete": false},"order": ["id desc"],"include": [{"relation": "steps"}]}'),e).then(T)},addDesign:function(e){var t={method:"POST",headers:k(),body:JSON.stringify(e)};return fetch("".concat(I,"/designs"),t).then(T)},deleteDesign:function(e){var t={method:"DELETE",headers:k()};return fetch("".concat(I,"/designs/").concat(e),t).then(T)},editDesign:function(e,t){var a={method:"PATCH",headers:k(),body:JSON.stringify(t)};return fetch("".concat(I,"/designs/").concat(e),a).then(T)}};var B={addOperations:function(e){var t={method:"POST",headers:k(),body:JSON.stringify(e)};return fetch("".concat(I,"/steps"),t).then(T)},updateOperations:function(e,t){var a={method:"PUT",headers:k(),body:JSON.stringify(t)};return fetch("".concat(I,"/steps/").concat(e),a).then(T)},addAllOperations:function(e){var t={method:"POST",headers:k(),body:JSON.stringify(e)};return fetch("".concat(I,"/steps-multi"),t).then(T)}};var L={getCodByCod:function(e){var t={method:"Get",headers:k()};return fetch("".concat(I,'/cod?filter={"where": {"cod": "').concat(e,'"}}'),t).then(T)},getCodByStatusAndDate:function(e,t,a){var n={method:"Get",headers:k()};return fetch("".concat(I,'/cod?filter={"where": {"and": [{"date": {"between": ["').concat(t.toUTCString(),'","').concat(a.toUTCString(),'"]}},\n      {"or": [{"status": "').concat(e.dispatch?"dispatch":"",'"},\n          {"status": "').concat(e.return?"return":"",'"},\n          {"status": "').concat(e.paymentReceive?"payment_received":"",'"}\n        ]}]},"fields": {"cod": true, "amount": true, "status": true}}'),n).then(T)},addCods:function(e){var t={method:"POST",headers:k(),body:JSON.stringify(e)};return fetch("".concat(I,"/cod-multiple"),t).then(T)},updateCod:function(e,t){var a={method:"PATCH",headers:k(),body:JSON.stringify(e)};return fetch("".concat(I,"/cod/").concat(t),a).then(T)},updateCodPaymentReceived:function(e,t){var a={method:"PATCH",headers:k(),body:JSON.stringify(e)};return fetch("".concat(I,"/cod-payment-received"),a).then(T)}};var Q=a(7),V=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).notifyError=function(e){return D.b.error(e)},a.notifySuccess=function(e){return D.b.success(e)},a.handleSubmit=function(e,t){!1===e.currentTarget.checkValidity()?a.setState({validated:!0}):(a.setState({isLoading:!0}),Object(Q.trackPromise)(F.addOperator(a.state.form).then((function(e){a.setState({isLoading:!1,form:Object(C.a)({},a.state.form,{name:""})}),a.notifySuccess('Operator "'.concat(e.name,'" added successfully'))}),(function(e){a.notifyError(e)})))),e.preventDefault(),e.stopPropagation()},a.handleInputChange=function(e){var t=e.target,n="checkbox"===t.type?t.checked:t.value,r=t.name;console.log(r),a.setState({form:Object(C.a)({},a.state.form,Object(v.a)({},r,n))})},a.state={form:{name:"",team:"1",type:"1",isQC:!1},validated:!1,isLoading:!1},a.handleInputChange=a.handleInputChange.bind(Object(O.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement("h2",null,"Add Operator"),r.a.createElement("br",null),r.a.createElement(A.a,{noValidate:!0,validated:this.state.validated,onSubmit:this.handleSubmit},r.a.createElement(A.a.Group,{as:E.a,id:"name"},r.a.createElement(A.a.Label,{column:!0,sm:"4"},"Name"),r.a.createElement(g.a,{sm:"8"},r.a.createElement(A.a.Control,{type:"text",name:"name",value:this.state.form.name,onChange:this.handleInputChange,required:!0}))),r.a.createElement(A.a.Group,{as:E.a,id:"team"},r.a.createElement(A.a.Label,{column:!0,sm:"4"},"Team"),r.a.createElement(g.a,{sm:"8"},r.a.createElement(A.a.Control,{name:"team",as:"select",defaultValue:this.state.form.team,onChange:this.handleInputChange},r.a.createElement("option",{value:"1"},"1"),r.a.createElement("option",{value:"2"},"2"),r.a.createElement("option",{value:"3"},"3")))),r.a.createElement(A.a.Group,{as:E.a,id:"type"},r.a.createElement(A.a.Label,{column:!0,sm:"4"},"Select Operator Type"),r.a.createElement(g.a,{sm:"8"},r.a.createElement(A.a.Control,{as:"select",name:"type",defaultValue:this.state.form.type,onChange:this.handleInputChange},r.a.createElement("option",{value:"1"},"Machine Operator"),r.a.createElement("option",{value:"2"},"Helper")))),"2"===this.state.form.type&&r.a.createElement(A.a.Group,{as:E.a,id:"type"},r.a.createElement(A.a.Label,{column:!0,sm:"4"},"Is QC?"),r.a.createElement(g.a,{sm:"8"},r.a.createElement(A.a.Check,{name:"isQC",type:"checkbox",label:"",checked:this.state.form.isQC,onChange:this.handleInputChange}))),r.a.createElement(S.a,{type:"submit",disabled:this.state.isLoading,variant:"dark"},this.state.isLoading?"Loading":"Add Operator")))}}]),t}(r.a.Component),q=a(301),Y=a(304),G=a(13),R=a(14),z=a(20),U=a.n(z),H=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).notifyError=function(e){return D.b.error(e)},a.notifySuccess=function(e){return D.b.success(e)},a.editOperator=function(e,t){var n=U.a.cloneDeep(a.state.operators[t]);n.ind=t,a.setState({selectedOperator:n,modal:Object(C.a)({},a.state.modal,{showEditModal:!0,title:"Edit Operator ".concat(n.name)})})},a.removeOperator=function(e,t){var n=a.state.operators[t];a.setState({selectedOperator:n,modal:Object(C.a)({},a.state.modal,{showConfirmation:!0,title:"Remove Operator ".concat(n.name),body:"Are you sure ?"})})},a.confirmEdit=function(){a.setState({isLoading:!0});var e=U.a.cloneDeep(a.state.selectedOperator);delete e.ind,Object(Q.trackPromise)(F.editOperator(a.state.selectedOperator.id,e).then((function(e){var t=a.state.operators,n=a.state.selectedOperator.ind;console.log("here",n),t[n]=a.state.selectedOperator,a.setState({operators:t,isLoading:!1}),a.handleClose(),a.notifySuccess("".concat(a.state.selectedOperator.name," successfully edited"))}),(function(e){a.notifyError(e)})))},a.confirmDelete=function(){a.setState({isLoading:!0}),Object(Q.trackPromise)(F.deleteOperator(a.state.selectedOperator.id).then((function(){var e=a.state.operators,t=e.indexOf(a.state.selectedOperator);e.splice(t,1),a.setState({operators:e,isLoading:!1}),a.handleClose(),a.notifySuccess("".concat(a.state.selectedOperator.name," successfully deleted"))}),(function(e){a.notifyError(e)})))},a.handleClose=function(){a.setState({modal:Object(C.a)({},a.state.modal,{showConfirmation:!1,showSuccess:!1,showEditModal:!1})})},a.handleInputChange=function(e){var t=e.target,n="checkbox"===t.type?t.checked:t.value,r=t.name;a.setState({selectedOperator:Object(C.a)({},a.state.selectedOperator,Object(v.a)({},r,n))})},a.state={operators:[],modal:{showConfirmation:!1,showSuccess:!1,showEditModal:!1,title:"",body:""},selectedOperator:{},isLoading:!1},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;x.currentUser.subscribe((function(t){return e.setState({currentUser:t})})),Object(Q.trackPromise)(F.getOperators().then((function(t){var a=t||[];e.setState({operators:a})}),(function(t){e.setState({msg:t}),console.error("Error:",t)})))}},{key:"render",value:function(){var e=this;return r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement("h2",null,"Edit Operators"),r.a.createElement("br",null),r.a.createElement(E.a,null,r.a.createElement(q.a,{striped:!0,bordered:!0,hover:!0,size:"sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Team"),r.a.createElement("th",{width:90}))),r.a.createElement("tbody",null,this.state.operators&&this.state.operators.map((function(t,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null,t.name),r.a.createElement("td",null,t.team),r.a.createElement("td",{className:"text-center"},r.a.createElement(S.a,{variant:"outline-primary",onClick:function(){return e.editOperator(t.id,a)},size:"sm"},r.a.createElement(G.a,{icon:R.c})),"\xa0",e.state.currentUser&&e.state.currentUser.roles.includes("admin")&&r.a.createElement(S.a,{variant:"danger",onClick:function(){return e.removeOperator(t.id,a)},size:"sm"},r.a.createElement(G.a,{icon:R.h}))))}))))),r.a.createElement(Y.a,{show:this.state.modal.showEditModal,onHide:this.handleClose,centered:!0},r.a.createElement(Y.a.Header,{closeButton:!0},r.a.createElement(Y.a.Title,null,this.state.modal.title)),r.a.createElement(Y.a.Body,null,r.a.createElement(b.a,null,r.a.createElement(A.a,{noValidate:!0,validated:this.state.validated},r.a.createElement(A.a.Group,{as:E.a,id:"name"},r.a.createElement(A.a.Label,{column:!0,sm:"4"},"Name"),r.a.createElement(g.a,{sm:"8"},r.a.createElement(A.a.Control,{type:"text",name:"name",defaultValue:this.state.selectedOperator.name,onChange:this.handleInputChange,required:!0}))),r.a.createElement(A.a.Group,{as:E.a,id:"team"},r.a.createElement(A.a.Label,{column:!0,sm:"4"},"Team"),r.a.createElement(g.a,{sm:"8"},r.a.createElement(A.a.Control,{name:"team",as:"select",defaultValue:this.state.selectedOperator.team,onChange:this.handleInputChange},r.a.createElement("option",{value:"1"},"1"),r.a.createElement("option",{value:"2"},"2"),r.a.createElement("option",{value:"3"},"3")))),r.a.createElement(A.a.Group,{as:E.a,id:"type"},r.a.createElement(A.a.Label,{column:!0,sm:"4"},"Select Operator Type"),r.a.createElement(g.a,{sm:"8"},r.a.createElement(A.a.Control,{as:"select",name:"type",defaultValue:this.state.selectedOperator.type,onChange:this.handleInputChange},r.a.createElement("option",{value:"1"},"Machine Operator"),r.a.createElement("option",{value:"2"},"Helper")))),"2"===this.state.selectedOperator.type&&r.a.createElement(A.a.Group,{as:E.a,id:"type"},r.a.createElement(A.a.Label,{column:!0,sm:"4"},"Is QC?"),r.a.createElement(g.a,{sm:"8"},r.a.createElement(A.a.Check,{name:"isQC",type:"checkbox",label:"",checked:this.state.selectedOperator.isQC,onChange:this.handleInputChange})))))),r.a.createElement(Y.a.Footer,null,r.a.createElement(S.a,{variant:"secondary",onClick:this.confirmEdit},this.state.isLoading?"Loading":"Edit"),r.a.createElement(S.a,{disabled:this.state.isLoading,variant:"secondary",onClick:this.handleClose},"Cancel"))),r.a.createElement(Y.a,{show:this.state.modal.showConfirmation,onHide:this.handleClose,centered:!0},r.a.createElement(Y.a.Header,{closeButton:!0},r.a.createElement(Y.a.Title,null,this.state.modal.title)),r.a.createElement(Y.a.Body,null,this.state.modal.body),r.a.createElement(Y.a.Footer,null,r.a.createElement(S.a,{variant:"secondary",onClick:this.confirmDelete},this.state.isLoading?"Loading":"Confirm"),r.a.createElement(S.a,{disabled:this.state.isLoading,variant:"secondary",onClick:this.handleClose},"Cancel"))))}}]),t}(r.a.Component),K=a(302),J=a(309),W=a(312),Z=a(33),X=a.n(Z),_=a(49),$=a.n(_),ee=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).fetchDesigns=function(){Object(Q.trackPromise)(P.getLastTwoMonthsAllDesigns().then((function(e){var t=a.calculateTimeToComplete(e);a.setState({designs:t}),a.fetchOperators()}),(function(e){a.setState({msg:e}),console.error("Error:",e)})))},a.calculateTimeToComplete=function(e){var t=new Date,n=new Date(t.getFullYear(),t.getMonth(),1,0,0,0),r=new Date(t.getFullYear(),t.getMonth()-1,1,0,0,0),l=0,s=0;return e.map((function(e,t){var a=0,o=0,c=0;return e.steps&&e.steps.map((function(t,l){return a+=t.estimatedTime,2!==e.type&&(t.operatorSteps&&t.operatorSteps.map((function(e,a){return new Date(e.completeTime)>new Date(n)?o+=t.estimatedTime*e.quantity:new Date(e.completeTime)>new Date(r)&&(c+=t.estimatedTime*e.quantity),e})),a)})),l+=o/a||0,s+=c/a||0,e.totalTime=a,e.sewingValueForSecond=(e.sewingValue?e.sewingValue:0)/a,e})),console.log(l,s),a.setState({thisMonthCompletedCount:parseInt(l),lastMonthCompletedCount:parseInt(s)}),e},a.fetchOperators=function(){Object(Q.trackPromise)(F.getOperatorWithOperations().then((function(e){var t=new Date,n=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0),r=$()(n).add(-1,"days"),l=new Date(t.setDate(n.getDate()+1)),s=$()(new Date).subtract(1,"months").endOf("month"),o=$()(new Date).subtract(2,"months").endOf("month");e.map((function(e,t){var c=a.calculateSalary(e,n,l);e.todaySalary=c.totalSalary,e.todayTime=c.totalTime,e.todayCompleteCount=c.totalCompleteCount;var i=a.calculateSalary(e,r,n);e.yesterdaySalary=i.totalSalary,e.yesterdayTime=i.totalTime,e.yesterdayCompleteCount=i.totalCompleteCount;var m=a.calculateSalary(e,s,l);e.thisMonthTime=m.totalTime,e.thisMonthSalary=m.totalSalary,e.thisMonthCompleteCount=m.totalCompleteCount;var d=a.calculateSalary(e,o,s);return e.lastMonthTime=d.totalTime,e.lastMonthSalary=d.totalSalary,e.lastMonthCompleteCount=d.totalCompleteCount,e}));var c=a.calculatePercentage(e);e.map((function(e,t){return e.todayPercentage=0===e.todayTime?0:Math.round(e.todayTime/c.totalTodayTime*1e4)/100,e.thisMonthPercentage=0===e.thisMonthTime?0:Math.round(e.thisMonthTime/c.totalThisMonthTime*1e4)/100,e.lastMonthPercentage=0===e.lastMonthTime?0:Math.round(e.lastMonthTime/c.totalLastMonthTime*1e4)/100,e})),a.calculateBonus(e),a.addOperatorInfo(e),e=U.a.orderBy(e,["todayTime","yesterdayTime"],["desc","desc"]),a.setState({operators:e})}),(function(e){a.setState({msg:e}),console.error("Error:",e)})))},a.viewSalarySheetModal=function(){a.setState((function(e){return{modal:Object(C.a)({},e.modal,{showSalaryModal:!0})}}))},a.handleClose=function(){a.setState({modal:Object(C.a)({},a.state.modal,{showInfoModal:!1,showSalaryModal:!1})})},a.sortOperator=function(e){if("today"===e){var t=U.a.orderBy(a.state.operators,["todaySalary"],["desc"]);a.setState({operators:t})}if("yesterday"===e){var n=U.a.orderBy(a.state.operators,["yesterdaySalary"],["desc"]);a.setState({operators:n})}if("thisMonth"===e){var r=U.a.orderBy(a.state.operators,["thisMonthSalary"],["desc"]);a.setState({operators:r})}if("lastMonth"===e){var l=U.a.orderBy(a.state.operators,["lastMonthSalary"],["desc"]);a.setState({operators:l})}},a.updateOperatorStep=function(e,t,n){Object(Q.trackPromise)(F.updateOperatorSteps(e.id,{quantity:e.updatedQuantity}).then((function(r){a.fetchOperators(),e.editable=!1,e.quantity=e.updatedQuantity;var l=a.state.selectedOperator;l.operatorSteps[t][n]=e,a.setState({operator:l})}),(function(e){a.setState({msg:e}),console.error("Error:",e)})))},a.state={operators:[],designs:[],view:"monthly",operatorType:"operator",days:[],selectedOperator:{},thisMonthCompletedCount:0,lastMonthCompletedCount:0,modal:{showInfoModal:!1,showSalaryModal:!1}},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.fetchDesigns()}},{key:"calculateBonus",value:function(e){var t=this,a=U.a.orderBy(e,["thisMonthTime"],["desc"]),n=U.a.orderBy(e,["lastMonthTime"],["desc"]);a.map((function(e,t){return"1"===e.type&&(e.thisMonthBonus=0===t?3e3:1===t?2e3:2===t?1e3:3===t?500:0,e)})),n.map((function(e,a){return"1"===e.type&&(e.lastMonthBonus=0===a?3e3:1===a?2e3:2===a?1e3:3===a?500:0,e.performancePlaceLastMonth=t.ordinal_suffix_of(a+1),e)}))}},{key:"ordinal_suffix_of",value:function(e){var t=e%10,a=e%100;return 1===t&&11!==a?e+"st":2===t&&12!==a?e+"nd":3===t&&13!==a?e+"rd":e+"th"}},{key:"calculatePercentage",value:function(e){var t=0,a=0,n=0;return e&&e.map((function(e,r){return"1"===e.type&&(t+=e.lastMonthTime,a+=e.thisMonthTime,n+=e.todayTime,e)})),{totalLastMonthTime:t,totalThisMonthTime:a,totalTodayTime:n}}},{key:"timeFormatter",value:function(e){return(Math.floor(e/60/60/8)>0?Math.floor(e/60/60/8)+" days  ":"")+(Math.floor(e/60/60%8)>0?Math.floor(e/60/60%8)+" hrs  ":"")+(Math.floor(e/60%60)>0?Math.floor(e/60%60)+" mins  ":"")+e%60+" secs"}},{key:"salaryFormatter",value:function(e){return"Rs. "+(e?e.toFixed(2):0)}},{key:"calculateSalary",value:function(e,t,a){var n=this,r=0,l=0,s=0;return e.operatorSteps&&e.operatorSteps.map((function(e,o){if(new Date(t)>new Date(e.completeTime)||new Date(e.completeTime)>new Date(a))return r;var c=U.a.find(n.state.designs,{id:e.step.designId});return r+=e.step.estimatedTime*e.quantity,l+=e.step.estimatedTime*e.quantity/c.totalTime,s+=e.step.estimatedTime*e.quantity*c.sewingValueForSecond,e})),{totalTime:r,totalSalary:s,totalCompleteCount:l}}},{key:"calculateDaily",value:function(e){var t=this,a=0,n=0,r=0;return e&&e.map((function(e,l){var s=U.a.find(t.state.designs,{id:e.step.designId});return a+=e.step.estimatedTime*e.quantity,n+=e.step.estimatedTime*e.quantity/s.totalTime,r+=e.step.estimatedTime*e.quantity*s.sewingValueForSecond,e})),"".concat(this.salaryFormatter(r)," - ").concat($.a.duration(a,"seconds").format("hh [hr] mm [min]")," ~ ").concat(parseInt(n)," Dresses")}},{key:"addOperatorInfo",value:function(e){var t=[];e.map((function(a,n){return a.operatorSteps&&a.operatorSteps.map((function(e,t){return e.date=$()(e.completeTime).format("MMM DD YYYY"),e})),a.operatorSteps=U.a.groupBy(a.operatorSteps,"date"),Object.keys(a.operatorSteps).map((function(e,n){return!t.includes(e)&&n<5&&t.push(e),a})),e})),t=t.slice(0,5),this.setState({days:t.reverse()})}},{key:"viewOperatorInfo",value:function(e){this.setState({modal:{showInfoModal:!0},selectedOperator:e})}},{key:"print",value:function(){this.handleClose(),window.print()}},{key:"render",value:function(){var e=this,t=new Date;return r.a.createElement(b.a,{className:"non-printable"},r.a.createElement("br",null),r.a.createElement("div",{className:"d-flex flex-row justify-content-between mt-2 mb-2"},r.a.createElement("div",null,r.a.createElement(K.a,{size:"sm"},r.a.createElement(S.a,{variant:"operator"===this.state.operatorType?"primary":"outline-primary",onClick:function(){return e.setState({operatorType:"operator"})}},"Machine Operator"),r.a.createElement(S.a,{variant:"helper"===this.state.operatorType?"primary":"outline-primary",onClick:function(){return e.setState({operatorType:"helper"})}},"Helper"))),r.a.createElement("div",null,r.a.createElement("div",null,"This Month Completed Count: ",this.state.thisMonthCompletedCount),r.a.createElement("div",null,"Last Month Completed Count: ",this.state.lastMonthCompletedCount)),r.a.createElement("div",null,r.a.createElement(S.a,{variant:"primary",onClick:this.viewSalarySheetModal},r.a.createElement(G.a,{icon:R.f})," Print Salary Sheet"))),"operator"===this.state.operatorType&&r.a.createElement("div",{className:"d-flex flex-row justify-content-between mt-2 mb-2"},r.a.createElement("div",{className:"custom-file w-25 text-left"},r.a.createElement("h2",null,"View Operators")),r.a.createElement("div",null,r.a.createElement(K.a,{size:"sm"},r.a.createElement(S.a,{variant:"monthly"===this.state.view?"primary":"outline-primary",onClick:function(){return e.setState({view:"monthly"})}},"Monthly"),r.a.createElement(S.a,{variant:"daily"===this.state.view?"primary":"outline-primary",onClick:function(){return e.setState({view:"daily"})}},"Daily")))),"helper"===this.state.operatorType&&r.a.createElement("h2",null,"View Helpers"),r.a.createElement("br",null),"operator"===this.state.operatorType&&r.a.createElement("div",null,r.a.createElement(E.a,null,"monthly"===this.state.view&&r.a.createElement(q.a,{striped:!0,bordered:!0,hover:!0,size:"sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",{className:"d-none d-md-table-cell"},"Team"),r.a.createElement("th",{className:"cursor-pointer d-none d-md-table-cell",onClick:function(){return e.sortOperator("lastMonth")}},r.a.createElement("span",{className:"d-none d-md-block"},r.a.createElement(X.a,{format:"MMMM",subtract:{months:1}},t)),r.a.createElement("span",{className:"d-block d-md-none"},r.a.createElement(X.a,{format:"MMM",subtract:{months:1}},t))),r.a.createElement("th",{className:"cursor-pointer",onClick:function(){return e.sortOperator("thisMonth")}},r.a.createElement("span",{className:"d-none d-md-block"},r.a.createElement(X.a,{format:"MMMM"},t)),r.a.createElement("span",{className:"d-block d-md-none"},r.a.createElement(X.a,{format:"MMM"},t))),r.a.createElement("th",{className:"cursor-pointer",onClick:function(){return e.sortOperator("yesterday")}},"Yesterday"),r.a.createElement("th",{className:"cursor-pointer",onClick:function(){return e.sortOperator("today")}},"Today"),r.a.createElement("th",{width:40}))),r.a.createElement("tbody",null,this.state.operators&&this.state.operators.map((function(t,a){return"1"===t.type&&r.a.createElement("tr",{key:a},r.a.createElement("td",null,t.name),r.a.createElement("td",{className:"d-none d-md-table-cell"},t.team),r.a.createElement("td",{className:"d-none d-md-table-cell"},r.a.createElement("div",null,r.a.createElement("strong",null,e.salaryFormatter(t.lastMonthSalary))," + ",r.a.createElement("small",{className:"text-success"},e.salaryFormatter(t.lastMonthBonus))),r.a.createElement("div",null,r.a.createElement("small",null,e.timeFormatter(t.lastMonthTime))," ~ ",r.a.createElement("small",null,parseInt(t.lastMonthCompleteCount)," Dresses"))),r.a.createElement("td",null,r.a.createElement("div",null,r.a.createElement("strong",null,e.salaryFormatter(t.thisMonthSalary))," + ",r.a.createElement("small",{className:"text-muted"},e.salaryFormatter(t.thisMonthBonus))),r.a.createElement("div",null,r.a.createElement("small",null,e.timeFormatter(t.thisMonthTime))," ~ ",r.a.createElement("small",null,parseInt(t.thisMonthCompleteCount)," Dresses"))),r.a.createElement("td",null,r.a.createElement("div",null,r.a.createElement("strong",null,e.salaryFormatter(t.yesterdaySalary))),r.a.createElement("div",null,r.a.createElement("small",null,e.timeFormatter(t.yesterdayTime))," ~ ",r.a.createElement("small",null,parseInt(t.yesterdayCompleteCount)," Dresses"))),r.a.createElement("td",null,r.a.createElement("div",null,r.a.createElement("strong",null,e.salaryFormatter(t.todaySalary))),r.a.createElement("div",null,r.a.createElement("small",null,e.timeFormatter(t.todayTime))," ~ ",r.a.createElement("small",null,parseInt(t.todayCompleteCount)," Dresses"))),r.a.createElement("td",{className:"text-center"},r.a.createElement(S.a,{variant:"outline-primary",onClick:function(){return e.viewOperatorInfo(t)},size:"sm"},r.a.createElement(G.a,{icon:R.d}))))})))),"daily"===this.state.view&&r.a.createElement(q.a,{striped:!0,bordered:!0,hover:!0,size:"sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),this.state.days.map((function(t,a){return r.a.createElement("th",{key:a},e.state.days[a])})),r.a.createElement("th",null))),r.a.createElement("tbody",null,this.state.operators&&this.state.operators.map((function(t,a){return"1"===t.type&&r.a.createElement("tr",{key:a},r.a.createElement("td",null,t.name),e.state.days.map((function(a,n){return r.a.createElement("td",{key:n},e.calculateDaily(t.operatorSteps[a]))})),r.a.createElement("td",{className:"text-center"},r.a.createElement(S.a,{variant:"outline-primary",onClick:function(){return e.viewOperatorInfo(t)},size:"sm"},r.a.createElement(G.a,{icon:R.d}))))})))))),"helper"===this.state.operatorType&&r.a.createElement("div",null,r.a.createElement(E.a,null,r.a.createElement(q.a,{striped:!0,bordered:!0,hover:!0,size:"sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",{className:"cursor-pointer d-none d-md-table-cell",onClick:function(){return e.sortOperator("lastMonth")}},r.a.createElement("span",{className:"d-none d-md-block"},r.a.createElement(X.a,{format:"MMMM",subtract:{months:1}},t)),r.a.createElement("span",{className:"d-block d-md-none"},r.a.createElement(X.a,{format:"MMM",subtract:{months:1}},t))),r.a.createElement("th",{className:"cursor-pointer",onClick:function(){return e.sortOperator("thisMonth")}},r.a.createElement("span",{className:"d-none d-md-block"},r.a.createElement(X.a,{format:"MMMM"},t)),r.a.createElement("span",{className:"d-block d-md-none"},r.a.createElement(X.a,{format:"MMM"},t))),r.a.createElement("th",{className:"cursor-pointer",onClick:function(){return e.sortOperator("yesterday")}},"Yesterday"),r.a.createElement("th",{className:"cursor-pointer",onClick:function(){return e.sortOperator("today")}},"Today"),r.a.createElement("th",{width:40}))),r.a.createElement("tbody",null,this.state.operators&&this.state.operators.map((function(t,a){if("1"===t.type)return!1;var n=t.isQC;return r.a.createElement("tr",{key:a},r.a.createElement("td",null,t.name),r.a.createElement("td",{className:"d-none d-md-table-cell"},r.a.createElement("div",null,r.a.createElement("strong",null,e.salaryFormatter(t.lastMonthSalary+(n?10*e.state.lastMonthCompletedCount:0))," "),r.a.createElement("br",null),"~ ",r.a.createElement("small",null,parseInt(t.lastMonthCompleteCount)," Helper Dresses "),n&&r.a.createElement("small",null," & ",e.state.lastMonthCompletedCount," Checked Dresses"))),r.a.createElement("td",null,r.a.createElement("div",null,r.a.createElement("strong",null,e.salaryFormatter(t.thisMonthSalary+(n?10*e.state.thisMonthCompletedCount:0))," "),r.a.createElement("br",null),"~ ",r.a.createElement("small",null,parseInt(t.thisMonthCompleteCount)," Helper Dresses"),n&&r.a.createElement("small",null," & ",e.state.thisMonthCompletedCount," Checked Dresses"))),r.a.createElement("td",null,r.a.createElement("div",null,r.a.createElement("strong",null,e.salaryFormatter(t.yesterdaySalary)," "),"~ ",r.a.createElement("small",null,parseInt(t.yesterdayCompleteCount)," Dresses"))),r.a.createElement("td",null,r.a.createElement("div",null,r.a.createElement("strong",null,e.salaryFormatter(t.todaySalary)," "),"~ ",r.a.createElement("small",null,parseInt(t.todayCompleteCount)," Dresses"))),r.a.createElement("td",{className:"text-center"},r.a.createElement(S.a,{variant:"outline-primary",onClick:function(){return e.viewOperatorInfo(t)},size:"sm"},r.a.createElement(G.a,{icon:R.d}))))})))))),r.a.createElement(Y.a,{scrollable:!0,show:this.state.modal.showInfoModal,onHide:this.handleClose,centered:!0},r.a.createElement(Y.a.Header,{closeButton:!0},r.a.createElement(Y.a.Title,null,this.state.selectedOperator.name,"'s Activities")),r.a.createElement(Y.a.Body,null,r.a.createElement(q.a,{striped:!0,bordered:!0,hover:!0,size:"sm"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Today Work"),r.a.createElement("td",{className:"text-right"},this.state.selectedOperator.todayPercentage," %"),r.a.createElement("td",{className:"text-right"},this.salaryFormatter(this.state.selectedOperator.todaySalary))),r.a.createElement("tr",null,r.a.createElement("td",null,"This Month Work"),r.a.createElement("td",{className:"text-right"},this.state.selectedOperator.thisMonthPercentage," %"),r.a.createElement("td",{className:"text-right"},this.salaryFormatter(this.state.selectedOperator.thisMonthSalary))),r.a.createElement("tr",null,r.a.createElement("td",null,"Last Month Work"),r.a.createElement("td",{className:"text-right"},this.state.selectedOperator.lastMonthPercentage," %"),r.a.createElement("td",{className:"text-right"},this.salaryFormatter(this.state.selectedOperator.lastMonthSalary))))),r.a.createElement(J.a,{defaultActiveKey:"0",className:"w-100"},this.state.selectedOperator.operatorSteps&&Object.keys(this.state.selectedOperator.operatorSteps).map((function(t){return r.a.createElement(W.a,{key:t},r.a.createElement(J.a.Toggle,{className:"pl-1",as:W.a.Header,eventKey:t},r.a.createElement("h6",{className:"d-flex justify-content-between m-0"},r.a.createElement("span",null,t),r.a.createElement("span",null,e.calculateDaily(e.state.selectedOperator.operatorSteps[t])))),r.a.createElement(J.a.Collapse,{eventKey:t,className:""},r.a.createElement(q.a,{striped:!0,bordered:!0,hover:!0,size:"sm",className:"m-0 border-right-0 border-left-0 border-bottom-0"},r.a.createElement("tbody",null,e.state.selectedOperator.operatorSteps[t].map((function(a,n){var l=U.a.find(e.state.designs,{id:a.step.designId}),s=e.state.selectedOperator.operatorSteps[t].length-1===n;return r.a.createElement("tr",{key:n},r.a.createElement("td",{className:"border-left-0 ".concat(s?"border-bottom-0":"")},l.name,"-",l.description,"-",a.step.name),r.a.createElement("td",{className:s?"border-bottom-0":""},!a.editable&&r.a.createElement("span",null,a.quantity),a.editable&&r.a.createElement("div",{className:"d-flex"},r.a.createElement("input",{name:"quantity",type:"number",className:"form-control",defaultValue:a.quantity,onChange:function(r){a.updatedQuantity=parseInt(r.target.value);var l=e.state.selectedOperator;l.operatorSteps[t][n]=a,e.setState({operator:l})}}),r.a.createElement(S.a,{variant:"primary",onClick:function(){e.updateOperatorStep(a,t,n)},size:"sm"},r.a.createElement(G.a,{icon:R.i})))),r.a.createElement("td",{className:s?"border-bottom-0":""},$.a.duration(a.step.estimatedTime*a.quantity,"seconds").format("d [d] hh [h] mm [min]")),r.a.createElement("td",{className:"text-center border-right-0 ".concat(s?"border-bottom-0":"")},r.a.createElement(S.a,{variant:"outline-primary",className:"mr-1",onClick:function(){a.editable=!a.editable,a.updatedQuantity=a.quantity;var r=e.state.selectedOperator;r.operatorSteps[t][n]=a,e.setState({operator:r})},size:"sm"},r.a.createElement(G.a,{icon:R.c}))))}))))))})))),r.a.createElement(Y.a.Footer,null,r.a.createElement(S.a,{disabled:this.state.isLoading,variant:"secondary",onClick:this.handleClose},"Ok"))),r.a.createElement(Y.a,{scrollable:!0,show:this.state.modal.showSalaryModal,onHide:this.handleClose,centered:!0},r.a.createElement(Y.a.Header,{closeButton:!0},r.a.createElement(Y.a.Title,null,"Salary Sheets")),r.a.createElement(Y.a.Body,{className:"printable"},r.a.createElement(b.a,null,r.a.createElement(E.a,null,this.state.operators&&this.state.operators.map((function(a,n){return!(0===a.lastMonthTime&&!a.isQC)&&("1"===a.type?r.a.createElement("div",{key:n,className:"salary-table w-100 mb-5"},r.a.createElement(q.a,{borderless:!0},r.a.createElement("colgroup",null,r.a.createElement("col",null),r.a.createElement("col",null),r.a.createElement("col",{width:200})),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{colSpan:3,className:"text-center"},r.a.createElement("div",{className:"flex-column align-items-center"},r.a.createElement("div",null,r.a.createElement("img",{alt:"logo",className:"logo-salary-print",src:"logo.png"})),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement("small",null,"Garment")),r.a.createElement("div",null,r.a.createElement("small",null,"Temple Road, Bingiriya"))))),r.a.createElement("tr",{className:"border-top"},r.a.createElement("td",{colSpan:3,className:"text-center"},a.name," - ",r.a.createElement("small",null,r.a.createElement(X.a,{format:"MMMM YYYY",subtract:{months:1}},t)))),r.a.createElement("tr",{className:"border-top"},r.a.createElement("td",null,"Working Hours"),r.a.createElement("td",{className:"text-right"},r.a.createElement("small",null,e.timeFormatter(a.lastMonthTime))),r.a.createElement("td",null)),r.a.createElement("tr",null,r.a.createElement("td",null,"Completed Dresses"),r.a.createElement("td",{className:"text-right"},r.a.createElement("small",null,parseInt(a.lastMonthCompleteCount))),r.a.createElement("td",null)),r.a.createElement("tr",null,r.a.createElement("td",null,"Salary"),r.a.createElement("td",null),r.a.createElement("td",{className:"text-right"},e.salaryFormatter(a.lastMonthSalary))),r.a.createElement("tr",null,r.a.createElement("td",null,"Operator Of Month"),r.a.createElement("td",{className:"text-right"},r.a.createElement("small",null,a.performancePlaceLastMonth)),r.a.createElement("td",null)),r.a.createElement("tr",null,r.a.createElement("td",null,"Operator Of Month Bonus"),r.a.createElement("td",null),r.a.createElement("td",{className:"text-right"},e.salaryFormatter(a.lastMonthBonus))),r.a.createElement("tr",{className:"border-top"},r.a.createElement("td",null,"Total Salary"),r.a.createElement("td",null),r.a.createElement("td",{className:"text-right border-bottom"},r.a.createElement("strong",null,e.salaryFormatter(a.lastMonthSalary+a.lastMonthBonus))))))):"2"!==a.type||r.a.createElement("div",{key:n,className:"salary-table w-100 mb-5"},r.a.createElement(q.a,{borderless:!0},r.a.createElement("colgroup",null,r.a.createElement("col",null),r.a.createElement("col",null),r.a.createElement("col",{width:200})),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{colSpan:3,className:"text-center"},r.a.createElement("div",{className:"flex-column align-items-center"},r.a.createElement("div",null,r.a.createElement("img",{alt:"logo",className:"logo-salary-print",src:"logo.png"})),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement("small",null,"Garment")),r.a.createElement("div",null,r.a.createElement("small",null,"Temple Road, Bingiriya"))))),r.a.createElement("tr",{className:"border-top"},r.a.createElement("td",{colSpan:3,className:"text-center"},a.name," - ",r.a.createElement("small",null,r.a.createElement(X.a,{format:"MMMM YYYY",subtract:{months:1}},t)))),r.a.createElement("tr",null,r.a.createElement("td",null,"Completed Dresses (Helper)"),r.a.createElement("td",{className:"text-right"},r.a.createElement("small",null,parseInt(a.lastMonthCompleteCount))),r.a.createElement("td",null)),r.a.createElement("tr",null,r.a.createElement("td",null,"Salary (Helper)"),r.a.createElement("td",null),r.a.createElement("td",{className:"text-right"},e.salaryFormatter(a.lastMonthSalary))),a.isQC&&r.a.createElement(r.a.Fragment,null,r.a.createElement("tr",null,r.a.createElement("td",null,"Completed Dresses (QC)"),r.a.createElement("td",{className:"text-right"},r.a.createElement("small",null,parseInt(e.state.lastMonthCompletedCount))),r.a.createElement("td",null)),r.a.createElement("tr",null,r.a.createElement("td",null,"Salary (QC)"),r.a.createElement("td",null),r.a.createElement("td",{className:"text-right"},e.salaryFormatter(10*e.state.lastMonthCompletedCount)))),r.a.createElement("tr",{className:"border-top"},r.a.createElement("td",null,"Total Salary"),r.a.createElement("td",null),r.a.createElement("td",{className:"text-right border-bottom"},r.a.createElement("strong",null,e.salaryFormatter(a.lastMonthSalary+(a.isQC?10*e.state.lastMonthCompletedCount:0)))))))))}))))),r.a.createElement(Y.a.Footer,null,r.a.createElement(S.a,{variant:"primary",onClick:function(){e.print()}},"Print")," ",r.a.createElement(S.a,{variant:"secondary",onClick:this.handleClose},"Cancel"))))}}]),t}(r.a.Component),te=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).notifyError=function(e){return D.b.error(e)},a.notifySuccess=function(e){return D.b.success(e)},a.handleSubmit=function(e,t){!1===e.currentTarget.checkValidity()?a.setState({validated:!0}):(a.setState({isLoading:!0}),Object(Q.trackPromise)(P.addDesign(a.state.form).then((function(e){a.setState({isLoading:!1,form:Object(C.a)({},a.state.form,{name:""})}),a.notifySuccess('Design "'.concat(e.name,'" added successfully'))}),(function(e){a.notifyError(e)})))),e.preventDefault(),e.stopPropagation()},a.handleDesignTypeChange=function(e){var t=e.target,n=parseInt(t.value),r=Object(C.a)({},a.state.form,{type:n});a.setState({form:r})},a.handleInputChange=function(e){var t=e.target,n="checkbox"===t.type?t.checked:"number"===t.type?parseInt(t.value)?parseInt(t.value):"":t.value,r=t.name;console.log(r),a.setState({form:Object(C.a)({},a.state.form,Object(v.a)({},r,n))})},a.state={form:{name:"",description:"",quantity:1,sewingValue:0,type:1,startTime:new Date,isComplete:!1},validated:!1,isLoading:!1},a.handleInputChange=a.handleInputChange.bind(Object(O.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement("h1",null,"Add Design"),r.a.createElement("br",null),r.a.createElement(A.a,{noValidate:!0,validated:this.state.validated,onSubmit:this.handleSubmit},r.a.createElement(A.a.Group,{as:E.a,id:"name"},r.a.createElement(A.a.Label,{column:!0,sm:"2"},"Name"),r.a.createElement(g.a,{sm:"10"},r.a.createElement(A.a.Control,{type:"text",name:"name",value:this.state.form.name,onChange:this.handleInputChange,required:!0}))),r.a.createElement(A.a.Group,{as:E.a,id:"description"},r.a.createElement(A.a.Label,{column:!0,sm:"2"},"Description"),r.a.createElement(g.a,{sm:"10"},r.a.createElement(A.a.Control,{type:"text",name:"description",value:this.state.form.description,onChange:this.handleInputChange,required:!0}))),r.a.createElement(A.a.Group,{as:E.a,controlId:"exampleForm.ControlSelect1"},r.a.createElement(A.a.Label,{column:!0,sm:"2"},"Select Design Type"),r.a.createElement(g.a,{sm:"10"},r.a.createElement(A.a.Control,{as:"select",name:"type",onChange:this.handleDesignTypeChange},r.a.createElement("option",{value:"1"},"Sawing"),r.a.createElement("option",{value:"2"},"Helper")))),r.a.createElement(A.a.Group,{as:E.a,id:"quantity"},r.a.createElement(A.a.Label,{column:!0,sm:"2"},"Quantity"),r.a.createElement(g.a,{sm:"10"},r.a.createElement(A.a.Control,{type:"number",name:"quantity",value:this.state.form.quantity,onChange:this.handleInputChange}))),r.a.createElement(A.a.Group,{as:E.a,id:"sewingValue"},r.a.createElement(A.a.Label,{column:!0,sm:"2"},"Sewing Value"),r.a.createElement(g.a,{sm:"10"},r.a.createElement(A.a.Control,{type:"number",name:"sewingValue",value:this.state.form.sewingValue,onChange:this.handleInputChange}))),r.a.createElement(S.a,{type:"submit",disabled:this.state.isLoading,variant:"dark"},this.state.isLoading?"Loading":"Add Design")))}}]),t}(r.a.Component),ae=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).handleSubmit=function(e,t){!1===e.currentTarget.checkValidity()?a.setState({validated:!0}):(a.setState({isLoading:!0}),Object(Q.trackPromise)(P.editDesign(a.props.design.id,a.state.form).then((function(e){a.setState({isLoading:!1,modal:Object(C.a)({},a.state.modal,{show:!0,title:"Success",body:'Design "'.concat(a.state.form.name,'" Updated successfully')})}),a.props.design.description=a.state.form.description,a.props.design.type=a.state.form.type,a.props.design.name=a.state.form.name,a.props.design.quantity=a.state.form.quantity,a.props.design.sewingValue=a.state.form.sewingValue,a.props.design.isComplete=a.state.form.isComplete}),(function(e){a.setState({msg:e,isLoading:!1}),console.error("Error:",e)})))),e.preventDefault(),e.stopPropagation()},a.handleDesignTypeChange=function(e){var t=e.target,n=parseInt(t.value),r=Object(C.a)({},a.state.form,{type:n});a.setState({form:r})},a.handleInputChange=function(e){var t=e.target,n="checkbox"===t.type?t.checked:"number"===t.type?parseInt(t.value)?parseInt(t.value):"":t.value,r=t.name;console.log(r),a.setState({form:Object(C.a)({},a.state.form,Object(v.a)({},r,n))})},a.handleClose=function(){a.setState({modal:Object(C.a)({},a.state.modal,{show:!1})})},a.state={form:{name:"",description:"",type:1,quantity:0,sewingValue:0,isComplete:!1},modal:{show:!1,title:"",body:""},validated:!1,isLoading:!1},a.handleInputChange=a.handleInputChange.bind(Object(O.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){console.log(this.props.design.name),this.setState({form:Object(C.a)({},this.state.form,{name:this.props.design.name||"",description:this.props.design.description||"",type:this.props.design.type||1,quantity:this.props.design.quantity||0,sewingValue:this.props.design.sewingValue||0,isComplete:this.props.design.isComplete||!1})})}},{key:"render",value:function(){return r.a.createElement(b.a,null,r.a.createElement(A.a,{noValidate:!0,validated:this.state.validated,onSubmit:this.handleSubmit},r.a.createElement(A.a.Group,{as:E.a,id:"name"},r.a.createElement(A.a.Label,{column:!0,sm:"3"},"Name"),r.a.createElement(g.a,{sm:"9"},r.a.createElement(A.a.Control,{type:"text",name:"name",value:this.state.form.name,onChange:this.handleInputChange,required:!0}))),r.a.createElement(A.a.Group,{as:E.a,id:"description"},r.a.createElement(A.a.Label,{column:!0,sm:"3"},"Description"),r.a.createElement(g.a,{sm:"9"},r.a.createElement(A.a.Control,{type:"text",name:"description",value:this.state.form.description,onChange:this.handleInputChange,required:!0}))),r.a.createElement(A.a.Group,{as:E.a,controlId:"exampleForm.ControlSelect1"},r.a.createElement(A.a.Label,{column:!0,sm:"3"},"Select Design Type"),r.a.createElement(g.a,{sm:"9"},r.a.createElement(A.a.Control,{as:"select",name:"type",value:this.state.form.type,onChange:this.handleDesignTypeChange},r.a.createElement("option",{value:"1"},"Sawing"),r.a.createElement("option",{value:"2"},"Helper")))),r.a.createElement(A.a.Group,{as:E.a,id:"quantity"},r.a.createElement(A.a.Label,{column:!0,sm:"3"},"Quantity"),r.a.createElement(g.a,{sm:"9"},r.a.createElement(A.a.Control,{type:"number",name:"quantity",value:this.state.form.quantity,onChange:this.handleInputChange}))),r.a.createElement(A.a.Group,{as:E.a,id:"sewingValue"},r.a.createElement(A.a.Label,{column:!0,sm:"3"},"Sewing Value"),r.a.createElement(g.a,{sm:"9"},r.a.createElement(A.a.Control,{type:"number",name:"sewingValue",value:this.state.form.sewingValue,onChange:this.handleInputChange}))),r.a.createElement(A.a.Group,{as:E.a,id:"quantity"},r.a.createElement(g.a,{sm:"12"},r.a.createElement(A.a.Check,{type:"checkbox",id:"isComplete",label:"Check here for complete the design",name:"isComplete",checked:this.state.form.isComplete,onChange:this.handleInputChange}))),r.a.createElement(S.a,{type:"submit",disabled:this.state.isLoading,variant:"dark"},this.state.isLoading?"Loading":"Edit Design")),r.a.createElement(Y.a,{show:this.state.modal.show,onHide:this.handleClose,centered:!0},r.a.createElement(Y.a.Header,{closeButton:!0},r.a.createElement(Y.a.Title,null,this.state.modal.title)),r.a.createElement(Y.a.Body,null,this.state.modal.body),r.a.createElement(Y.a.Footer,null,r.a.createElement(S.a,{variant:"secondary",onClick:this.props.editComplete},"Ok"))))}}]),t}(r.a.Component),ne=a(106),re=a.n(ne),le=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).notifyError=function(e){return D.b.error(e)},a.notifySuccess=function(e){return D.b.success(e)},a.fetchDesigns=function(e){Object(Q.trackPromise)(P.getAllDesigns(e).then((function(e){a.setState({designs:e})}),(function(e){a.setState({msg:e}),console.error("Error:",e)})))},a.editDesign=function(e,t){var n=a.state.designs[t];a.setState({selectedDesign:n,modal:Object(C.a)({},a.state.modal,{showEditModal:!0,title:"Edit Design",body:""})})},a.removeDesign=function(e,t){var n=a.state.designs[t];a.setState({selectedDesign:n,modal:Object(C.a)({},a.state.modal,{showConfirmation:!0,title:"Remove Design ".concat(n.name),body:"Are you sure ?"})})},a.confirmDelete=function(){a.setState({isLoading:!0}),Object(Q.trackPromise)(P.deleteDesign(a.state.selectedDesign.id).then((function(e){var t=a.state.designs,n=t.indexOf(a.state.selectedDesign);t.splice(n,1),a.setState({designs:t,isLoading:!1}),a.handleClose(),a.notifySuccess("".concat(a.state.selectedDesign.name," successfully deleted"))}),(function(e){a.notifyError(e)})))},a.duplicateDesign=function(e){var t=U.a.cloneDeep(e);delete t.id,t.steps&&t.steps.forEach((function(e){delete e.id,delete e.operatorSteps,delete e.designId})),console.log(t),a.setState({selectedDesign:t,modal:Object(C.a)({},a.state.modal,{showDuplicateModal:!0,title:"Duplicate Design"})})},a.confirmDesignDuplicate=function(){a.setState({isLoading:!0});var e=a.state.selectedDesign;Object(Q.trackPromise)(P.addDesign({name:e.name,description:e.description,quantity:0,sewingValue:e.sewingValue,startTime:new Date,isComplete:!1}).then((function(e){a.duplicateOperations(e.id)}),(function(e){a.notifyError(e)})))},a.duplicateOperations=function(e){var t=a.state.selectedDesign,n=[];t.steps&&t.steps.forEach((function(t){t.designId=e,n.push(t)})),Object(Q.trackPromise)(B.addAllOperations(n).then((function(e){a.setState({isLoading:!1,form:Object(C.a)({},a.state.form,{name:""}),modal:Object(C.a)({},a.state.modal,{showDuplicateModal:!1,title:"Success",body:'Design "'.concat(t.name,'" duplicated successfully')})}),a.notifySuccess('Design "'.concat(t.name,'" duplicated successfully')),a.fetchDesigns()}),(function(e){a.notifyError(e)})))},a.viewDesignInfo=function(e,t){var n;return re.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.state.designs[t],e.next=3,re.a.awrap(a.setState({selectedDesign:n,modal:Object(C.a)({},a.state.modal,{showInfoModal:!0,title:"".concat(n.name," Details"),body:""})}));case 3:a.calculateTotalTimeToComplete(),a.calculateCompletedTime();case 5:case"end":return e.stop()}}))},a.calculateTimeToComplete=function(){var e=a.state.selectedDesign;if(!e.steps)return 0;var t=0;return e.steps.map((function(e,a){return t+=e.estimatedTime})),Math.floor(t/60)+" Minutes  "+t%60+" Seconds"},a.calculateCompletedTime=function(){var e=a.state.selectedDesign;if(!e.steps)return 0;var t=0;e.steps.map((function(e,a){return e.operatorSteps&&e.operatorSteps.map((function(a,n){return t+=a.quantity*e.estimatedTime})),0})),e.totalCompletedTime=t,a.setState({selectedDesign:e})},a.calculateTotalTimeToComplete=function(){var e=a.state.selectedDesign;if(!e.steps)return 0;var t=0;return e.steps.map((function(e,a){return t+=e.estimatedTime})),e.totalTimeToComplete=t*a.state.selectedDesign.quantity,a.setState({selectedDesign:e}),a.state.selectedDesign},a.timeFormatter=function(e){return Math.floor(e/60/60)+" Hours  "+Math.floor(e/60%60)+" Minutes  "+e%60+" Seconds"},a.operationCompletedCount=function(e){if(!e)return 0;var t=0;return e.map((function(e,a){return t+=e.quantity})),t<a.state.selectedDesign.quantity?r.a.createElement("span",{className:"text-warning"},t):t>a.state.selectedDesign.quantity?r.a.createElement("span",{className:"text-danger"},t):r.a.createElement("span",{className:"text-success"},t)},a.handleClose=function(){a.setState({modal:Object(C.a)({},a.state.modal,{showConfirmation:!1,showEditModal:!1,showInfoModal:!1,showDuplicateModal:!1})})},a.state={designs:[],currentUser:null,view:"incomplete",modal:{showConfirmation:!1,showInfoModal:!1,showEditModal:!1,showDuplicateModal:!1,title:"",body:""},selectedDesign:{},isLoading:!1},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;x.currentUser.subscribe((function(t){return e.setState({currentUser:t})})),this.fetchDesigns(this.state.view)}},{key:"render",value:function(){var e=this;return r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement("div",{className:"d-flex flex-row justify-content-between mt-2 mb-2"},r.a.createElement("div",{className:"custom-file w-25 text-left"},r.a.createElement("h2",null,"View Designs")),r.a.createElement("div",null,r.a.createElement(K.a,{size:"sm"},r.a.createElement(S.a,{variant:"incomplete"===this.state.view?"primary":"outline-primary",onClick:function(){e.setState({view:"incomplete"}),e.fetchDesigns("incomplete")}},"Incomplete"),r.a.createElement(S.a,{variant:"complete"===this.state.view?"primary":"outline-primary",onClick:function(){e.setState({view:"complete"}),e.fetchDesigns("complete")}},"Complete"),r.a.createElement(S.a,{variant:"all"===this.state.view?"primary":"outline-primary",onClick:function(){e.setState({view:"all"}),e.fetchDesigns("all")}},"All")))),r.a.createElement("br",null),r.a.createElement(E.a,null,r.a.createElement(q.a,{striped:!0,bordered:!0,hover:!0,size:"sm",style:{width:"100%"}},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",{className:"d-none d-md-table-cell"},"Desc"),r.a.createElement("th",{width:90,className:"d-none d-md-table-cell"},"Quantity"),r.a.createElement("th",{width:110},"Status"),r.a.createElement("th",{width:145},"Actions"))),r.a.createElement("tbody",null,this.state.designs.map((function(t,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",{title:t.name},r.a.createElement("div",null,t.name)),r.a.createElement("td",{className:"d-none d-md-table-cell text-truncate",title:t.description},t.description),r.a.createElement("td",{className:"d-none d-md-table-cell text-right pr-3"},t.quantity),r.a.createElement("td",null,t.isComplete?"Complete":"Not Complete"),r.a.createElement("td",null,r.a.createElement("div",{className:"d-flex align-items-center justify-content-center"},r.a.createElement(S.a,{className:"mr-1",variant:"outline-primary",onClick:function(){return e.viewDesignInfo(t,a)},size:"sm"},r.a.createElement(G.a,{title:"Details",icon:R.d})),r.a.createElement(S.a,{className:"mr-1",variant:"outline-primary",onClick:function(){return e.editDesign(t.id,a)},size:"sm"},r.a.createElement(G.a,{title:"Edit",icon:R.c})),r.a.createElement(S.a,{className:"mr-1",variant:"outline-primary",onClick:function(){return e.duplicateDesign(t)},size:"sm"},r.a.createElement(G.a,{title:"Duplicate",icon:R.b})),e.state.currentUser&&e.state.currentUser.roles.includes("admin")&&!t.steps&&r.a.createElement(S.a,{variant:"danger",onClick:function(){return e.removeDesign(t.id,a)},size:"sm"},r.a.createElement(G.a,{title:"Delete",icon:R.h})))))}))))),r.a.createElement(Y.a,{show:this.state.modal.showConfirmation,onHide:this.handleClose,centered:!0},r.a.createElement(Y.a.Header,{closeButton:!0},r.a.createElement(Y.a.Title,null,this.state.modal.title)),r.a.createElement(Y.a.Body,null,this.state.modal.body),r.a.createElement(Y.a.Footer,null,r.a.createElement(S.a,{variant:"secondary",onClick:this.confirmDelete},this.state.isLoading?"Loading":"Confirm"),r.a.createElement(S.a,{disabled:this.state.isLoading,variant:"secondary",onClick:this.handleClose},"Cancel"))),r.a.createElement(Y.a,{show:this.state.modal.showEditModal,onHide:this.handleClose,centered:!0},r.a.createElement(Y.a.Header,{closeButton:!0},r.a.createElement(Y.a.Title,null,this.state.modal.title)),r.a.createElement(Y.a.Body,null,r.a.createElement(ae,{design:this.state.selectedDesign,history:this.props.history,editComplete:function(){return e.handleClose()}})),r.a.createElement(Y.a.Footer,null,r.a.createElement(S.a,{disabled:this.state.isLoading,variant:"secondary",onClick:this.handleClose},"Cancel"))),r.a.createElement(Y.a,{show:this.state.modal.showInfoModal,onHide:this.handleClose,centered:!0},r.a.createElement(Y.a.Header,{closeButton:!0},r.a.createElement(Y.a.Title,null,this.state.modal.title)),r.a.createElement(Y.a.Body,null,r.a.createElement(q.a,{striped:!0,bordered:!0,hover:!0,size:"sm"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Name"),r.a.createElement("td",null,this.state.selectedDesign.name)),r.a.createElement("tr",null,r.a.createElement("td",null,"Desc"),r.a.createElement("td",null,this.state.selectedDesign.description)),r.a.createElement("tr",null,r.a.createElement("td",null,"Quantity"),r.a.createElement("td",null,this.state.selectedDesign.quantity)),r.a.createElement("tr",null,r.a.createElement("td",null,"Sewing Value"),r.a.createElement("td",null,this.state.selectedDesign.sewingValue)),r.a.createElement("tr",null,r.a.createElement("td",null,"Time To Complete One"),r.a.createElement("td",null,this.calculateTimeToComplete())),r.a.createElement("tr",null,r.a.createElement("td",null,"Time To Complete ",this.state.selectedDesign.quantity),r.a.createElement("td",null,this.timeFormatter(this.state.selectedDesign.totalTimeToComplete))),r.a.createElement("tr",null,r.a.createElement("td",null,"Currently Completed"),r.a.createElement("td",null,this.timeFormatter(this.state.selectedDesign.totalCompletedTime))),r.a.createElement("tr",null,r.a.createElement("td",null," Completed Percentage"),r.a.createElement("td",null,Math.round(this.state.selectedDesign.totalCompletedTime/this.state.selectedDesign.totalTimeToComplete*1e4)/100," %")))),r.a.createElement("br",null),r.a.createElement("h6",null,"Operations"),r.a.createElement(q.a,{striped:!0,bordered:!0,hover:!0,size:"sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",{width:150},"Completed Count"))),r.a.createElement("tbody",null,this.state.selectedDesign.steps&&this.state.selectedDesign.steps.map((function(t,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null,t.name),r.a.createElement("td",{className:"text-right"},e.operationCompletedCount(t.operatorSteps)))}))))),r.a.createElement(Y.a.Footer,null,r.a.createElement(S.a,{disabled:this.state.isLoading,variant:"secondary",onClick:this.handleClose},"Cancel"))),r.a.createElement(Y.a,{show:this.state.modal.showDuplicateModal,onHide:this.handleClose,centered:!0},r.a.createElement(Y.a.Header,{closeButton:!0},r.a.createElement(Y.a.Title,null,this.state.modal.title)),r.a.createElement(Y.a.Body,null,r.a.createElement(E.a,{className:"mb-3"},r.a.createElement(g.a,{md:5},this.state.selectedDesign.name),r.a.createElement(g.a,{md:7},this.state.selectedDesign.description)),r.a.createElement(q.a,{striped:!0,bordered:!0,hover:!0,size:"sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Description"),r.a.createElement("th",null,"Estimated Time"))),r.a.createElement("tbody",null,this.state.selectedDesign.steps&&this.state.selectedDesign.steps.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.description),r.a.createElement("td",null,e.estimatedTime))}))))),r.a.createElement(Y.a.Footer,null,r.a.createElement(S.a,{disabled:this.state.isLoading,variant:"primary",onClick:this.confirmDesignDuplicate},"Duplicate"),r.a.createElement(S.a,{disabled:this.state.isLoading,variant:"secondary",onClick:this.handleClose},"Cancel"))))}}]),t}(r.a.Component),se=a(111),oe=a(89),ce=a.n(oe),ie=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).handleAddOperation=function(){var e=Object(se.a)(a.state.form);e.unshift({name:"",description:"",estimatedTime:0,designId:a.state.selectedDesign.id}),a.setState({form:e})},a.handleRemoveOperation=function(e,t){var n=Object(se.a)(a.state.form);n.splice(e,1),a.setState({form:n})},a.handleUpdateOperation=function(e,t){if(!a.state.selectedDesign)return t.preventDefault(),t.stopPropagation(),!1;if(!1===t.currentTarget.checkValidity())a.setState({validated:!0});else{a.setState({isLoading:!0});var n=a.state.form[e];delete n.isChange,Object(Q.trackPromise)(B.updateOperations(n.id,n).then((function(t){var n=a.state.form;n[e].isChange=!1,n[e].id=t.id,a.setState({isLoading:!1,form:n,modal:Object(C.a)({},a.state.modal,{show:!0,title:"Success",body:'Operation "'.concat(t.name,'" Added Successfully')})})}),(function(e){a.setState({msg:e}),console.error("Error:",e)})))}t.preventDefault(),t.stopPropagation()},a.handleCreateOperation=function(e,t){if(!a.state.selectedDesign)return t.preventDefault(),t.stopPropagation(),!1;if(!1===t.currentTarget.checkValidity())a.setState({validated:!0});else{a.setState({isLoading:!0});var n=a.state.form[e];delete n.isChange,Object(Q.trackPromise)(B.addOperations(n).then((function(t){var n=a.state.form;n[e].isChange=!1,n[e].id=t.id,a.setState({isLoading:!1,form:n,modal:Object(C.a)({},a.state.modal,{show:!0,title:"Success",body:'Operation "'.concat(t.name,'" Added Successfully')})})}),(function(e){a.setState({msg:e}),console.error("Error:",e)})))}t.preventDefault(),t.stopPropagation()},a.handleInputChange=function(e,t){var n=t.target,r="checkbox"===n.type?n.checked:"number"===n.type?parseInt(n.value)?parseInt(n.value):"":n.value,l=n.name,s=a.state.form;s[e][l]=r,s[e].isChange=""!==r,a.setState({form:s})},a.handleDesignChange=function(e){var t=e.target.value;if(""===t)return a.setState({form:[],selectedDesign:!1}),!1;var n=a.state.designs[t],r=n.steps?n.steps:[{name:"",description:"1",estimatedTime:0,designId:n.id}];a.setState({form:r,selectedDesign:n})},a.handleTimer=function(e){a.setState({timerModal:!0,selectedOperationIndex:e})},a.handleClose=function(){a.setState({modal:Object(C.a)({},a.state.modal,{show:!1})})},a.userTimer=r.a.createRef(),a.state={designs:[],selectedDesign:!1,selectedOperationIndex:!1,form:[{name:"",description:"",estimatedTime:"",designId:null}],modal:{show:!1,title:"",body:""},timerModal:!1,validated:!1,isLoading:!1},a.handleInputChange=a.handleInputChange.bind(Object(O.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.fetchDesigns()}},{key:"fetchDesigns",value:function(){var e=this;Object(Q.trackPromise)(P.getIncompleteDesignsWithOperations().then((function(t){var a=t[0]&&t[0].steps?t[0].steps:[{name:"",description:"",estimatedTime:0,designId:t[0]?t[0].id:void 0}];e.setState({designs:t,selectedDesign:t[0],form:a})}),(function(t){e.setState({msg:t}),console.error("Error:",t)})))}},{key:"render",value:function(){var e=this;return r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement("h2",null,"Add Operations"),r.a.createElement("br",null),r.a.createElement(A.a,{noValidate:!0,validated:this.state.validated,onSubmit:this.handleSubmit},r.a.createElement(A.a.Group,{controlId:"exampleForm.ControlSelect1"},r.a.createElement(A.a.Label,null,"Select Design"),r.a.createElement(A.a.Control,{as:"select",onChange:this.handleDesignChange},this.state.designs.length>0&&this.state.designs.map((function(e,t){return r.a.createElement("option",{value:t,key:t},e.name)})))),this.state.form.length>0&&this.state.form.map((function(t,a){return r.a.createElement(n.Fragment,{key:a},r.a.createElement(E.a,{className:"align-items-center no-gutters"},r.a.createElement("h5",{className:"mr-2"},"Operation ",a+1," --"),r.a.createElement("h6",{className:"mr-2"}," Hourly Target "),r.a.createElement("h6",{className:"mr-2"}," (Idle) = ",Math.floor(3600/t.estimatedTime),", "),r.a.createElement("h6",{className:"mr-2"}," (Minimum) = ",Math.floor(3600/t.estimatedTime*.8))),r.a.createElement("hr",{className:"mt-0"}),r.a.createElement(A.a.Group,{as:E.a},r.a.createElement(g.a,{sm:12,md:3,className:"mb-2"},r.a.createElement(A.a.Label,null,"Name"),r.a.createElement(A.a.Control,{type:"text",name:"name",value:t.name,onChange:function(t){return e.handleInputChange(a,t)},required:!0})),r.a.createElement(g.a,{sm:12,md:3,className:"mb-2"},r.a.createElement(A.a.Label,null,"Description"),r.a.createElement(A.a.Control,{type:"text",name:"description",value:t.description,onChange:function(t){return e.handleInputChange(a,t)}})),r.a.createElement(g.a,{sm:12,md:3,className:"mb-2"},r.a.createElement(A.a.Label,null,"Estimated Time (S)"),r.a.createElement(E.a,null,r.a.createElement(g.a,{xs:9},r.a.createElement(A.a.Control,{type:"number",name:"estimatedTime",value:t.estimatedTime,onChange:function(t){return e.handleInputChange(a,t)},required:!0})),r.a.createElement(g.a,{xs:3},r.a.createElement(S.a,{type:"button",variant:"dark",onClick:function(){return e.handleTimer(a)}},r.a.createElement(G.a,{icon:R.a}))))),r.a.createElement(g.a,{sm:12,md:3,className:"mb-2 d-flex align-items-end justify-content-center pt-3"},0===a&&r.a.createElement(S.a,{type:"button",variant:"dark",onClick:function(){return e.handleAddOperation()}},r.a.createElement(G.a,{icon:R.e})),"\xa0",t.isChange&&t.id&&r.a.createElement(S.a,{type:"button",variant:"dark",disabled:e.state.isLoading||!e.state.selectedDesign||""===t.name.replace(/ /g,"")||""===t.description.replace(/ /g,"")||t.estimatedTime<1,onClick:function(t){return e.handleUpdateOperation(a,t)}},r.a.createElement(G.a,{icon:R.i})),t.isChange&&!t.id&&r.a.createElement(S.a,{type:"button",variant:"dark",disabled:e.state.isLoading||!e.state.selectedDesign||""===t.name.replace(/ /g,"")||""===t.description.replace(/ /g,"")||t.estimatedTime<1,onClick:function(t){return e.handleCreateOperation(a,t)}},r.a.createElement(G.a,{icon:R.i})))))}))),r.a.createElement(Y.a,{show:this.state.modal.show,onHide:this.handleClose,centered:!0},r.a.createElement(Y.a.Header,{closeButton:!0},r.a.createElement(Y.a.Title,null,this.state.modal.title)),r.a.createElement(Y.a.Body,null,this.state.modal.body),r.a.createElement(Y.a.Footer,null,r.a.createElement(S.a,{variant:"secondary",onClick:this.handleClose},"Ok"))),r.a.createElement(Y.a,{show:this.state.timerModal,onHide:function(){e.setState({timerModal:!1})},centered:!0},r.a.createElement(Y.a.Header,{closeButton:!0},r.a.createElement(Y.a.Title,null,"Timer")),r.a.createElement(Y.a.Body,{className:"text-center"},r.a.createElement(ce.a,{ref:this.userTimer,initialTime:0,startImmediately:!1},(function(e){e.start,e.resume,e.pause,e.stop,e.reset;return r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,null,r.a.createElement("h1",{className:" col-6 pr-0 text-center"},r.a.createElement(ce.a.Minutes,null)," min"),r.a.createElement("h1",{className:" col-6 text-center"},r.a.createElement(ce.a.Seconds,null)," sec")))}))),r.a.createElement(Y.a.Footer,null,r.a.createElement(S.a,{variant:"primary",onClick:function(){e.userTimer.current.start()}},"start"),r.a.createElement(S.a,{variant:"secondary",onClick:function(){e.userTimer.current.pause()}},"pause"),r.a.createElement(S.a,{variant:"warning",onClick:function(){e.userTimer.current.reset()}},"reset"),r.a.createElement(S.a,{variant:"info",onClick:function(){var t=e.state.form,a=t[e.state.selectedOperationIndex];a.estimatedTime=Math.floor(e.userTimer.current.getTime()/1e3),a.isChange=!0,console.log(t),e.setState({form:t,timerModal:!1})}},"set"))))}}]),t}(r.a.Component),me=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).operationCompletedCount=function(e,t){if(!e)return 0;var a=0;return e.map((function(e,t){return a+=e.quantity})),a<t.quantity?r.a.createElement("span",{className:"text-warning"},a):a>t.quantity?r.a.createElement("span",{className:"text-danger"},a):r.a.createElement("span",{className:"text-success"},a)},a.viewOperationInfo=function(e,t){a.setState({selectedOperation:t,modal:Object(C.a)({},a.state.modal,{showInfoModal:!0,title:"".concat(e.name," - ").concat(t.name," Details")})})},a.handleClose=function(){a.setState({modal:Object(C.a)({},a.state.modal,{showInfoModal:!1})})},a.state={designs:[],selectedOperation:[],modal:{showInfoModal:!1,title:"",body:""}},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(Q.trackPromise)(P.getAllDesignsWithOperator().then((function(t){e.setState({designs:t})}),(function(t){e.setState({msg:t}),console.error("Error:",t)})))}},{key:"render",value:function(){var e=this;return r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement("h2",null,"View Operations"),r.a.createElement("br",null),this.state.designs.map((function(t,a){return r.a.createElement(E.a,{key:a},r.a.createElement("h4",null,t.name," - ",t.description," "),r.a.createElement(q.a,{striped:!0,bordered:!0,hover:!0,size:"sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Op. Name"),r.a.createElement("th",{className:"d-none d-md-table-cell"},"Op. Description"),r.a.createElement("th",{width:110,className:"d-none d-md-table-cell"},"Est. Time"),r.a.createElement("th",{width:100},"Completed"),r.a.createElement("th",{width:50}))),r.a.createElement("tbody",null,t.steps&&t.steps.map((function(a,n){return r.a.createElement("tr",{key:n},r.a.createElement("td",null,a.name),r.a.createElement("td",{className:"d-none d-md-table-cell"},a.description),r.a.createElement("td",{className:"d-none d-md-table-cell"},a.estimatedTime),r.a.createElement("td",{className:"text-right"},e.operationCompletedCount(a.operatorSteps,t)),r.a.createElement("td",{className:"text-center"},r.a.createElement(S.a,{variant:"outline-primary",onClick:function(){return e.viewOperationInfo(t,a)},size:"sm"},r.a.createElement(G.a,{icon:R.d}))))})))))})),r.a.createElement(Y.a,{scrollable:!0,show:this.state.modal.showInfoModal,onHide:this.handleClose,centered:!0},r.a.createElement(Y.a.Header,{closeButton:!0},r.a.createElement(Y.a.Title,null,this.state.modal.title)),r.a.createElement(Y.a.Body,null,r.a.createElement(q.a,{striped:!0,bordered:!0,hover:!0,size:"sm"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Name"),r.a.createElement("td",null,this.state.selectedOperation.name)),r.a.createElement("tr",null,r.a.createElement("td",null,"Description"),r.a.createElement("td",null,this.state.selectedOperation.description)),r.a.createElement("tr",null,r.a.createElement("td",null,"Estimated Time (S)"),r.a.createElement("td",null,this.state.selectedOperation.estimatedTime)))),r.a.createElement("br",null),r.a.createElement("h6",null,"Operations"),r.a.createElement(q.a,{striped:!0,bordered:!0,hover:!0,size:"sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",{width:150},"Completed Count"),r.a.createElement("th",{width:150},"Completed On"))),r.a.createElement("tbody",null,this.state.selectedOperation.operatorSteps&&this.state.selectedOperation.operatorSteps.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,e.operator&&e.operator.name),r.a.createElement("td",null,e.quantity),r.a.createElement("td",null,r.a.createElement(X.a,{format:"YYYY-MMM-DD"},e.completeTime)))}))))),r.a.createElement(Y.a.Footer,null,r.a.createElement(S.a,{disabled:this.state.isLoading,variant:"secondary",onClick:this.handleClose},"Ok"))))}}]),t}(r.a.Component),de=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).notifyError=function(e){return D.b.error(e)},a.notifySuccess=function(e){return D.b.success(e)},a.handleDesignChange=function(e){var t=e.target.value;if(""===t)return a.setState({selectedDesign:!1,selectedOperation:!1}),!1;var n=a.state.designs[t],r=!!n.steps&&n.steps;a.setState({operations:r,selectedDesign:n,selectedOperation:!1})},a.handleSubmit=function(e){Object(Q.trackPromise)(F.addOperatorOperations({quantity:a.state.form.quantity,completeTime:new Date,operatorId:a.state.selectedOperator.id,stepId:a.state.selectedOperation.id}).then((function(e){var t=U.a.cloneDeep(e.quantity);console.log(t),a.setState({form:Object(C.a)({},a.state.form,{quantity:0})}),a.notifySuccess("".concat(a.state.selectedOperator?a.state.selectedOperator.name:""," has\n                    completed ").concat(t," of ").concat(a.state.selectedDesign?a.state.selectedDesign.name:""," - ").concat(a.state.selectedOperation?a.state.selectedOperation.name:""))}),(function(e){a.notifyError(e)}))),e.preventDefault(),e.stopPropagation()},a.handleInputChange=function(e){var t=e.target,n="checkbox"===t.type?t.checked:"number"===t.type?parseInt(t.value)?parseInt(t.value):"":t.value,r=t.name;a.setState({form:Object(C.a)({},a.state.form,Object(v.a)({},r,n))})},a.state={operators:[],designs:[],operations:[],selectedOperator:!1,selectedDesign:!1,selectedOperation:!1,form:{operatorId:"",stepId:"",quantity:0,completedTime:null},isLoading:!1},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.fetchOperators(),this.fetchDesigns()}},{key:"fetchDesigns",value:function(){var e=this;Object(Q.trackPromise)(F.fetchDesigns().then((function(t){e.setState({designs:t})}),(function(t){e.setState({msg:t}),console.error("Error:",t)})))}},{key:"fetchOperators",value:function(){var e=this;Object(Q.trackPromise)(F.getOperators().then((function(t){e.setState({operators:t})}),(function(t){e.setState({msg:t}),console.error("Error:",t)})))}},{key:"render",value:function(){var e=this;return r.a.createElement(E.a,null,r.a.createElement(b.a,null,r.a.createElement("div",{"aria-live":"polite","aria-atomic":"true",style:{position:"relative",minHeight:"0"}}),r.a.createElement("br",null),r.a.createElement("h2",null,"Operator Operations"),r.a.createElement("br",null),r.a.createElement(A.a,{noValidate:!0,validated:this.state.validated,onSubmit:this.handleSubmit},r.a.createElement(A.a.Group,{controlId:"operators"},r.a.createElement(A.a.Label,null,"Select Operator"),r.a.createElement(A.a.Control,{as:"select",onChange:function(t){e.setState({selectedOperator:e.state.operators[t.target.value]})}},r.a.createElement("option",null),this.state.operators.length>0&&this.state.operators.map((function(e,t){return r.a.createElement("option",{value:t,key:t},e.name)})))),this.state.selectedOperator&&r.a.createElement(A.a.Group,{controlId:"designs"},r.a.createElement(A.a.Label,null,"Select Design"),r.a.createElement(A.a.Control,{as:"select",onChange:this.handleDesignChange},r.a.createElement("option",null),this.state.designs.length>0&&this.state.designs.map((function(e,t){return r.a.createElement("option",{value:t,key:t},e.name)})))),this.state.selectedDesign&&r.a.createElement(A.a.Group,{controlId:"operations"},r.a.createElement(A.a.Label,null,"Select Operation"),r.a.createElement(A.a.Control,{as:"select",onChange:function(t){console.log(t.target.value),e.setState({selectedOperation:e.state.operations[t.target.value]})}},r.a.createElement("option",null),this.state.operations.length>0&&this.state.operations.map((function(e,t){return r.a.createElement("option",{value:t,key:t},e.name)})))),this.state.selectedOperation&&r.a.createElement(A.a.Group,{id:"quantity"},r.a.createElement(A.a.Label,null,"Quantity"),r.a.createElement(A.a.Control,{type:"number",name:"quantity",value:this.state.form.quantity,onChange:this.handleInputChange,required:!0})),this.state.selectedOperation&&this.state.form.quantity>0&&r.a.createElement(S.a,{type:"submit",variant:"dark",disabled:this.state.isLoading||!this.state.selectedDesign},"Add Operator Operations"))))}}]),t}(r.a.Component),ue=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).onFormSubmit=function(e){Object(Q.trackPromise)(x.login(a.state.email,a.state.password).then((function(e){-1!==e.roles.indexOf("admin")?a.props.history.replace("/"):-1!==e.roles.indexOf("manager")?a.props.history.replace("/"):-1!==e.roles.indexOf("manager")?a.props.history.replace("/"):-1!==e.roles.indexOf("cleo")&&a.props.history.replace("/add-cod")}),(function(e){a.setState({msg:e}),console.error("Error:",e)}))),e.preventDefault(),e.stopPropagation()},a.state={email:"",password:"",msg:""},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:{height:"calc(100vh - 56px)"},className:"d-flex justify-content-center align-items-center"},r.a.createElement("div",{style:{width:300}},r.a.createElement("h1",{className:"text-center"},"Sign in"),r.a.createElement(A.a,{onSubmit:this.onFormSubmit},r.a.createElement("span",{className:"text-danger"},this.state.msg),r.a.createElement(A.a.Group,null,r.a.createElement(A.a.Label,null,"Email address"),r.a.createElement(A.a.Control,{type:"email",placeholder:"Enter email",defaultValue:this.state.email,onChange:function(t){e.setState({email:t.target.value})}})),r.a.createElement(A.a.Group,null,r.a.createElement(A.a.Label,null,"Password"),r.a.createElement(A.a.Control,{type:"password",placeholder:"Password",defaultValue:this.state.password,onChange:function(t){e.setState({password:t.target.value})}})),r.a.createElement(S.a,{variant:"primary",type:"submit",className:"w-100 mt-3"},"Sign in"))))}}]),t}(r.a.Component),he=a(172),pe=function(e){var t=e.component,a=e.roles,n=Object(he.a)(e,["component","roles"]);return r.a.createElement(h.b,Object.assign({},n,{render:function(e){var n=x.currentUserValue;return n?a&&0===a.filter((function(e){return n.roles.includes(e)})).length?x.logout():r.a.createElement(t,e):r.a.createElement(h.a,{to:{pathname:"/sign-in",state:{from:e.location}}})}}))},Ee=a(308),fe=a(69),ge=a.n(fe),ye=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).months=["Jan","Feb","Mar","Apr","May","June","Jul","Aug","Sep","Oct","Nov","Dec"],a.fileInput={},a.notifyError=function(e){return D.b.error(e)},a.notifySuccess=function(e){return D.b.success(e)},a.state={selectedFile:null,header:[],rows:[],printableBills:[],date:new Date},a.handleChange=a.handleChange.bind(Object(O.a)(a)),a.addCod=a.addCod.bind(Object(O.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"handleChange",value:function(e){var t,a=this,n=e.selectorFiles,r=[];this.setState({selectedFile:null,header:[],rows:[],printableBills:[]}),Object(Ee.a)(n[0]).then((function(e){if("TrackingNo"!==e[0][0])return a.notifyError("File invalid. Check the excel file before uploading"),!1;t=e.shift();var l={};e.map((function(e,t){return l={},null===e[0]?l:(l.cod=e[0],l.amount=parseFloat(e[1]),l.customer_name=e[2],l.customer_address=e[3],l.phone_no=e[4],l.city=e[5],l.description=e[6],l.note=e[7],l.status="dispatch",l.weight=1,l.date=a.state.date,r.push(l))})),a.setState({rows:e,header:t,selectedFile:n,cods:r})}))}},{key:"addCod",value:function(e){var t=this;Object(Q.trackPromise)(L.addCods(this.state.cods).then((function(e){t.setState({isLoading:!1,form:Object(C.a)({},t.state.form,{name:""})}),t.notifySuccess("".concat(t.state.cods.length," COD's added successfully"))}),(function(e){t.notifyError(e)}))),e.preventDefault(),e.stopPropagation()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App with-fixed-header"},r.a.createElement(E.a,{className:"d-flex flex-row justify-content-between pt-2 pb-2 fixed-top fixed-header pl-3 pr-3 bg-white border-bottom"},r.a.createElement(g.a,{md:4,className:"text-left d-flex flex-row justify-content-between"},r.a.createElement("div",{className:"custom-file"},r.a.createElement("input",{type:"file",className:"custom-file-input",id:"customFile",onChange:function(t){return e.handleChange({selectorFiles:t.target.files})},ref:function(t){return e.fileInput=t}}),r.a.createElement("label",{className:"custom-file-label",htmlFor:"customFile"},this.state.selectedFile?this.state.selectedFile[0].name:"Choose file")),r.a.createElement("div",{className:"ml-2 custom-file"},r.a.createElement(ge.a,{className:"w-100 h-100 border border-success",value:this.state.date,onChange:function(t){return e.setState({date:t})}}))),r.a.createElement(g.a,{className:"text-right"},this.state.rows.length>0&&r.a.createElement(S.a,{className:"mr-2",variant:"primary",onClick:this.addCod},r.a.createElement(G.a,{icon:R.i})," Upload ",this.state.rows.length," items"))),this.state.rows.length>0&&r.a.createElement(q.a,{striped:!0,bordered:!0,hover:!0,size:"sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,this.state.header[0]),r.a.createElement("th",null,this.state.header[1]),r.a.createElement("th",null,this.state.header[2]),r.a.createElement("th",null,this.state.header[3]),r.a.createElement("th",null,this.state.header[4]),r.a.createElement("th",null,this.state.header[5]),r.a.createElement("th",null,this.state.header[6]),r.a.createElement("th",null,this.state.header[7]||"Notes"))),r.a.createElement("tbody",null,this.state.rows.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,e[0]),r.a.createElement("td",null,e[1]),r.a.createElement("td",null,e[2]),r.a.createElement("td",null,e[3]),r.a.createElement("td",null,e[4]),r.a.createElement("td",null,e[5]),r.a.createElement("td",null,e[6]),r.a.createElement("td",null,e[7]))})))))}}]),t}(r.a.Component),be=a(303),ve=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).notifySuccess=function(e){return D.b.success(e)},a.searchCod=function(e){var t=e.target.value;if(10!==t.length)return a.setState({cod:null}),!1;Object(Q.trackPromise)(L.getCodByCod(t).then((function(e){var t=e[0];a.setState({cod:t})})))},a.updateCod=function(){var e=U.a.cloneDeep(a.state.cod);delete e.id,Object(Q.trackPromise)(L.updateCod(e,a.state.cod.id).then((function(t){a.notifySuccess("".concat(e.cod," update successfully"))})))},a.state={search:"COD0722750",cod:null},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return r.a.createElement(b.a,null,r.a.createElement("h3",{className:"mt-3"},"Update COD"),r.a.createElement(A.a,{as:E.a,className:"mt-3"},r.a.createElement(A.a.Group,{as:g.a,md:6,controlId:"search"},r.a.createElement(be.a,null,r.a.createElement(be.a.Prepend,null,r.a.createElement(be.a.Text,{id:"inputGroupPrepend"},r.a.createElement(G.a,{icon:R.g}))),r.a.createElement(A.a.Control,{type:"text",name:"search",placeholder:"Search COD",onChange:this.searchCod})))),this.state.cod&&r.a.createElement(A.a,{as:E.a,className:"mt-3 pt-3 mb-3 border-top"},r.a.createElement(A.a.Group,{as:g.a,md:6,controlId:"cod"},r.a.createElement(A.a.Label,null,"COD"),r.a.createElement(A.a.Control,{readOnly:!0,type:"text",name:"cod",placeholder:"Search COD",value:this.state.cod.cod,onChange:function(t){return e.setState({cod:Object(C.a)({},e.state.cod,{cod:t.target.value})})}})),r.a.createElement(A.a.Group,{as:g.a,md:6,controlId:"amount"},r.a.createElement(A.a.Label,null,"Amount"),r.a.createElement(A.a.Control,{readOnly:!0,type:"number",name:"amount",placeholder:"amount",value:this.state.cod.amount,onChange:function(t){return e.setState({cod:Object(C.a)({},e.state.cod,{amount:t.target.value})})}})),r.a.createElement(A.a.Group,{as:g.a,md:6,controlId:"address"},r.a.createElement(A.a.Label,null,"Address"),r.a.createElement(A.a.Control,{readOnly:!0,type:"text",name:"address",placeholder:"address",value:this.state.cod.customer_address,onChange:function(t){return e.setState({cod:Object(C.a)({},e.state.cod,{customer_address:t.target.value})})}})),r.a.createElement(A.a.Group,{as:g.a,md:6,controlId:"name"},r.a.createElement(A.a.Label,null,"Name"),r.a.createElement(A.a.Control,{readOnly:!0,type:"text",name:"name",placeholder:"name",value:this.state.cod.customer_name,onChange:function(t){return e.setState({cod:Object(C.a)({},e.state.cod,{customer_name:t.target.value})})}})),r.a.createElement(A.a.Group,{as:g.a,md:6,controlId:"phone"},r.a.createElement(A.a.Label,null,"Phone"),r.a.createElement(A.a.Control,{readOnly:!0,type:"text",name:"phone",placeholder:"phone",value:this.state.cod.phone_no,onChange:function(t){return e.setState({cod:Object(C.a)({},e.state.cod,{phone_no:t.target.value})})}})),r.a.createElement(A.a.Group,{as:g.a,md:6,controlId:"description"},r.a.createElement(A.a.Label,null,"Description"),r.a.createElement(A.a.Control,{readOnly:!0,type:"text",name:"description",placeholder:"description",value:this.state.cod.description,onChange:function(t){return e.setState({cod:Object(C.a)({},e.state.cod,{description:t.target.value})})}})),r.a.createElement(A.a.Group,{as:g.a,md:6,controlId:"note"},r.a.createElement(A.a.Label,null,"Notes"),r.a.createElement(A.a.Control,{readOnly:!0,type:"text",name:"note",placeholder:"note",value:this.state.cod.note,onChange:function(t){return e.setState({cod:Object(C.a)({},e.state.cod,{note:t.target.value})})}})),r.a.createElement(A.a.Group,{as:g.a,md:6,controlId:"note"},r.a.createElement(A.a.Label,null,"Status"),r.a.createElement(A.a.Control,{as:"select",name:"status",placeholder:"status",onChange:function(t){return e.setState({cod:Object(C.a)({},e.state.cod,{status:t.target.value})})},defaultValue:this.state.cod.status},r.a.createElement("option",{value:"dispatch"},"Dispatch"),r.a.createElement("option",{value:"return"},"Return"),r.a.createElement("option",{value:"payment_received"},"Payment Received"))),r.a.createElement(A.a.Group,{as:g.a,md:6,controlId:"weight"},r.a.createElement(A.a.Label,null,"Weight"),r.a.createElement(A.a.Control,{as:"select",type:"text",name:"weight",placeholder:"weight",onChange:function(t){return e.setState({cod:Object(C.a)({},e.state.cod,{weight:t.target.value})})},defaultValue:this.state.cod.weight},r.a.createElement("option",{value:1},"1 Kg"),r.a.createElement("option",{value:2},"2 Kg"),r.a.createElement("option",{value:3},"3 Kg"),r.a.createElement("option",{value:4},"4 Kg"),r.a.createElement("option",{value:5},"5 Kg"))),r.a.createElement(A.a.Group,{className:"text-right",as:g.a,md:6,controlId:"weight"},r.a.createElement(A.a.Label,null,"\xa0"),r.a.createElement(S.a,{className:"d-block",onClick:this.updateCod,variant:"primary"},"Update"))))}}]),t}(r.a.Component),Ce=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).months=["Jan","Feb","Mar","Apr","May","June","Jul","Aug","Sep","Oct","Nov","Dec"],a.fileInput={},a.state={modal:{show:!1},selectedFile:null,header:[],rows:[],printableBills:[],date:new Date},a.toggle=a.toggle.bind(Object(O.a)(a)),a.handleChange=a.handleChange.bind(Object(O.a)(a)),a.print=a.print.bind(Object(O.a)(a)),a.printAll=a.printAll.bind(Object(O.a)(a)),a.printSelected=a.printSelected.bind(Object(O.a)(a)),a.printOne=a.printOne.bind(Object(O.a)(a)),a.handleInputChange=a.handleInputChange.bind(Object(O.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"handleInputChange",value:function(e,t,a){if(a){var n=a.target,r="checkbox"===n.type?n.checked:n.value,l=this.state.printableBills;l[e][t]=r,this.setState({printableBills:l})}}},{key:"handleChange",value:function(e){var t,a=this,n=e.selectorFiles;console.log(n),Object(Ee.a)(n[0]).then((function(e){"TrackingNo"===e[0][0]&&(t=e.shift()),e.map((function(e,t){return e.selected=!1})),a.setState({rows:e,header:t,selectedFile:n})}))}},{key:"toggle",value:function(){this.setState({modal:Object(C.a)({},this.state.modal,{show:!this.state.modal.show})})}},{key:"print",value:function(){this.toggle(),window.print()}},{key:"printOne",value:function(e){this.setState({printableBills:[e]}),this.toggle()}},{key:"printAll",value:function(){this.setState({printableBills:this.state.rows}),this.toggle()}},{key:"toggleSelected",value:function(e,t){var a=this.state.rows;a[e].selected=t.target.checked,this.setState({rows:a})}},{key:"printSelected",value:function(){var e=[];this.state.rows.map((function(t,a){return t.selected&&e.push(t),t})),this.setState({printableBills:e}),this.toggle()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App non-printable"},r.a.createElement("div",{className:"d-flex flex-row justify-content-between mt-2 mb-2"},r.a.createElement("div",{className:"custom-file w-25 text-left"},r.a.createElement("input",{type:"file",className:"custom-file-input",id:"customFile",onChange:function(t){return e.handleChange({selectorFiles:t.target.files})},ref:function(t){return e.fileInput=t}}),r.a.createElement("label",{className:"custom-file-label",htmlFor:"customFile"},this.state.selectedFile?this.state.selectedFile[0].name:"Choose file")),r.a.createElement("div",null,r.a.createElement(S.a,{className:"mr-2",variant:"primary",onClick:this.printAll},r.a.createElement(G.a,{icon:R.f})," Print All"),r.a.createElement(S.a,{variant:"primary",onClick:this.printSelected},r.a.createElement(G.a,{icon:R.f})," Print Selected"))),this.state.rows.length>0&&r.a.createElement(q.a,{striped:!0,bordered:!0,hover:!0,size:"sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null),r.a.createElement("th",null,this.state.header[0]),r.a.createElement("th",null,this.state.header[1]),r.a.createElement("th",null,this.state.header[2]),r.a.createElement("th",null,this.state.header[3]),r.a.createElement("th",null,this.state.header[4]),r.a.createElement("th",null,this.state.header[5]),r.a.createElement("th",null,this.state.header[6]),r.a.createElement("th",null,this.state.header[7]||"Notes"),r.a.createElement("th",null))),r.a.createElement("tbody",null,this.state.rows.map((function(t,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null,r.a.createElement("input",{style:{margin:"10px"},type:"checkbox",defaultChecked:t.selected,onChange:function(t){return e.toggleSelected(a,t)}})),r.a.createElement("td",null,t[0]),r.a.createElement("td",null,t[1]),r.a.createElement("td",null,t[2]),r.a.createElement("td",null,t[3]),r.a.createElement("td",null,t[4]),r.a.createElement("td",null,t[5]),r.a.createElement("td",null,t[6]),r.a.createElement("td",null,t[7]),r.a.createElement("td",null,r.a.createElement(S.a,{variant:"primary",onClick:function(){return e.printOne(t)}},r.a.createElement(G.a,{icon:R.f}))))})))),r.a.createElement(Y.a,{show:this.state.modal.show,onHide:this.handleClose,centered:!0},r.a.createElement(Y.a.Body,{className:"printable"},this.state.printableBills.map((function(e,t){return r.a.createElement("div",{className:"bill",key:t},r.a.createElement("div",{className:"left"},r.a.createElement("img",{alt:"logo",className:"logo",src:a(272)}),r.a.createElement("span",{className:"phone-number"},"0775025907")),r.a.createElement("div",{className:"center"},r.a.createElement("span",{className:"contact-name"},e[2]),r.a.createElement("span",{className:"contact-address"},e[3]),r.a.createElement("span",{className:"contact-number"},e[4])),r.a.createElement("div",{className:"right"},r.a.createElement("span",null,e[0]),r.a.createElement("span",null,e[6]),r.a.createElement("span",null,"Rs.",e[1],".00")))}))),r.a.createElement(Y.a.Footer,null,r.a.createElement(S.a,{color:"primary",onClick:this.print},"Print")," ",r.a.createElement(S.a,{color:"secondary",onClick:this.toggle},"Cancel"))))}}]),t}(r.a.Component),Oe=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).notifyError=function(e){return D.b.error(e)},a.notifySuccess=function(e){return D.b.success(e)},a.state={selectedFile:null,header:[],rows:[]},a.updateCodPaymentStatus=a.updateCodPaymentStatus.bind(Object(O.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){}},{key:"handleChange",value:function(e){var t,a=this,n=e.selectorFiles,r=[];this.setState({selectedFile:null,header:[],rows:[],printableBills:[]}),Object(Ee.a)(n[0]).then((function(e){for(var l=e.length;l--;)null===e[l][0]?e.splice(l,1):-1!==e[l][0].indexOf("COD0")?r.push({cod:e[l][0]}):-1!==e[l][0].indexOf("Tracking No")?(t=U.a.cloneDeep(e[l]),e.splice(l,1)):e.splice(l,1);if(0===e.length)return a.notifyError("File invalid. Check the excel file before uploading"),!1;a.setState({rows:e,header:t,selectedFile:n,cods:r})}))}},{key:"updateCodPaymentStatus",value:function(e){var t=this;console.log(this.state.cods),Object(Q.trackPromise)(L.updateCodPaymentReceived(this.state.cods).then((function(e){t.setState({selectedFile:null,header:[],rows:[],printableBills:[]}),t.notifySuccess("".concat(t.state.cods.length," COD's updated successfully"))}))),e.preventDefault(),e.stopPropagation()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App with-fixed-header"},r.a.createElement(E.a,{className:"d-flex flex-row justify-content-between pt-2 pb-2 fixed-top fixed-header pl-3 pr-3 bg-white border-bottom"},r.a.createElement(g.a,{md:4,className:"text-left d-flex flex-row justify-content-between"},r.a.createElement("div",{className:"custom-file"},r.a.createElement("input",{type:"file",className:"custom-file-input",id:"customFile",onChange:function(t){return e.handleChange({selectorFiles:t.target.files})},ref:function(t){return e.fileInput=t}}),r.a.createElement("label",{className:"custom-file-label",htmlFor:"customFile"},this.state.selectedFile?this.state.selectedFile[0].name:"Choose file"))),r.a.createElement(g.a,{className:"text-right"},this.state.rows.length>0&&r.a.createElement(S.a,{className:"mr-2",variant:"primary",onClick:this.updateCodPaymentStatus},r.a.createElement(G.a,{icon:R.i})," Update ",this.state.rows.length," items Payment Status"))),this.state.rows.length>0&&r.a.createElement(q.a,{striped:!0,bordered:!0,hover:!0,size:"sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,this.state.header[0]),r.a.createElement("th",null,this.state.header[1]),r.a.createElement("th",null,this.state.header[2]),r.a.createElement("th",null,this.state.header[3]),r.a.createElement("th",null,this.state.header[4]),r.a.createElement("th",null,this.state.header[5]),r.a.createElement("th",null,this.state.header[6]))),r.a.createElement("tbody",null,this.state.rows.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,e[0]),r.a.createElement("td",null,e[1]),r.a.createElement("td",null,e[2]),r.a.createElement("td",null,e[3]),r.a.createElement("td",null,e[4]),r.a.createElement("td",null,e[5]),r.a.createElement("td",null,e[6]))})))))}}]),t}(r.a.Component),Ae=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).notifySuccess=function(e){return D.b.success(e)},a.getCod=function(){Object(Q.trackPromise)(L.getCodByStatusAndDate(a.state.codStatus,a.state.startDate,a.state.endDate).then((function(e){console.log(e),a.setState({cods:e,receivedPayment:a.calculateReceivedPayment(e)})})))},a.state={startDate:new Date,endDate:new Date,cods:[],codStatus:{dispatch:!1,return:!1,paymentReceive:!0}},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=new Date,t=new Date(e),a=new Date(e);t.setMonth(t.getMonth()-1);var n=new Date(t.getFullYear(),t.getMonth(),1,0,0,0,0);a.setMonth(a.getMonth());var r=new Date(a.getFullYear(),a.getMonth(),1,0,0,0,0);console.log(n),console.log(r),this.setState({startDate:n,endDate:r});var l=this;setTimeout((function(){l.getCod()}),1e3)}},{key:"calculateReceivedPayment",value:function(e){var t=0;return e.forEach((function(e,a){"payment_received"===e.status&&(t+=e.amount)})),t}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App with-fixed-header"},r.a.createElement("div",{className:"fixed-top fixed-header"},r.a.createElement(E.a,{className:"d-flex text-left flex-row pt-2 pb-2 pl-3 pr-3 align-items-center bg-white border-bottom"},r.a.createElement(g.a,{md:"auto"},r.a.createElement(A.a.Check,{inline:!0,label:"Dispatched ",type:"checkbox",id:"dispatched",onChange:function(t){e.setState({codStatus:Object(C.a)({},e.state.codStatus,{dispatch:t.target.checked})})}})),r.a.createElement(g.a,{md:"auto"},r.a.createElement(A.a.Check,{inline:!0,label:"Return",type:"checkbox",id:"returned",onChange:function(t){e.setState({codStatus:Object(C.a)({},e.state.codStatus,{return:t.target.checked})})}})),r.a.createElement(g.a,{md:"auto"},r.a.createElement(A.a.Check,{inline:!0,label:"Payment Received",checked:this.state.codStatus.paymentReceive,type:"checkbox",id:"payment_receive",onChange:function(t){e.setState({codStatus:Object(C.a)({},e.state.codStatus,{paymentReceive:t.target.checked})})}})),r.a.createElement(g.a,{md:"auto"},r.a.createElement(E.a,{className:" pt-2 pb-2  pl-3 pr-3 "},r.a.createElement(g.a,{md:"auto"},r.a.createElement(E.a,{className:"mr-0 ml-0 align-items-center"},r.a.createElement("label",{className:"m-0",style:{width:"70px"}},"From"),r.a.createElement(ge.a,{className:"h-100 border border-success",value:this.state.startDate,onChange:function(t){return e.setState({startDate:t})}}))),r.a.createElement(g.a,{md:"auto"},r.a.createElement(E.a,{className:"mr-0 ml-0 align-items-center"},r.a.createElement("label",{className:"m-0",style:{width:"70px"}},"To"),r.a.createElement(ge.a,{className:"h-100 border border-success",value:this.state.endDate,onChange:function(t){return e.setState({endDate:t})}}))),r.a.createElement(g.a,{md:"auto"},r.a.createElement(S.a,{variant:"primary",onClick:this.getCod},"View Cod's"))))),r.a.createElement(E.a,{className:"bg-white border-bottom pt-2"},r.a.createElement(g.a,null,r.a.createElement("h6",{className:"text-primary"},"Total Received Payment for ",this.state.cods.length,"- ",this.state.receivedPayment)))),this.state.cods.length>0&&r.a.createElement("div",{className:"pt-2"},r.a.createElement(q.a,{className:"mt-5",striped:!0,bordered:!0,hover:!0,size:"sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Tracking No"),r.a.createElement("th",null,"Amount"),r.a.createElement("th",null,"Status"))),r.a.createElement("tbody",null,this.state.cods.map((function(e,t){return r.a.createElement("tr",{className:"return"===e.status?"text-warning":"dispatch"===e.status?"":"text-success",key:t},r.a.createElement("td",null,e.cod),r.a.createElement("td",null,e.amount),r.a.createElement("td",null,e.status))}))))))}}]),t}(r.a.Component);D.b.configure({autoClose:15e3});var Se=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).onLogOut=function(){x.logout()},a.state={currentUser:null},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;x.currentUser.subscribe((function(t){return e.setState({currentUser:t})}))}},{key:"allowNav",value:function(e){return this.state.currentUser.roles.filter((function(t){return e.includes(t)})).length>0}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(D.a,null),r.a.createElement(p.a,{bg:"dark",variant:"dark",sticky:"top",expand:"lg",collapseOnSelect:!0},r.a.createElement(p.a.Brand,null,"DEEZ"),this.state.currentUser&&r.a.createElement(p.a.Toggle,{"aria-controls":"basic-navbar-nav"}),this.state.currentUser&&r.a.createElement(p.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement("div",{className:"mr-auto"},r.a.createElement(E.a,{className:"ml-0 mr-0"},this.allowNav(["admin","manager"])&&r.a.createElement(f.a,{className:"pr-0",as:g.a},r.a.createElement(y.a,{title:"Operators",id:"basic-nav-dropdown"},r.a.createElement(y.a.Item,{eventKey:"11",as:u.b,to:"add-operator"},"Add Operators"),r.a.createElement(y.a.Item,{eventKey:"12",as:u.b,to:"edit-operator"},"Edit Operators"),r.a.createElement(y.a.Item,{eventKey:"13",as:u.b,to:"view-operator"},"View Operators"),r.a.createElement(y.a.Item,{eventKey:"14",as:u.b,to:"operator-operations"},"Operator Operations")),r.a.createElement(y.a,{title:"Design",id:"basic-nav-dropdown"},r.a.createElement(y.a.Item,{eventKey:"21",as:u.b,to:"add-design"},"Add Design"),r.a.createElement(y.a.Item,{eventKey:"22",as:u.b,to:"view-design"},"View Design")),r.a.createElement(y.a,{title:"Operations",id:"basic-nav-dropdown"},r.a.createElement(y.a.Item,{eventKey:"31",as:u.b,to:"add-operations"},"Add Operations"),r.a.createElement(y.a.Item,{eventKey:"32",as:u.b,to:"view-operations"},"View Operations"))),this.allowNav(["admin","cleo"])&&r.a.createElement(f.a,{className:"pr-0",as:g.a},r.a.createElement(y.a,{title:"COD",id:"basic-nav-dropdown"},r.a.createElement(y.a.Item,{eventKey:"41",as:u.b,to:"print-cod"},"Print COD's"),r.a.createElement(y.a.Item,{eventKey:"42",as:u.b,to:"add-cod"},"Add COD's"),r.a.createElement(y.a.Item,{eventKey:"43",as:u.b,to:"edit-cod"},"Edit COD's"),this.allowNav(["admin"])&&r.a.createElement(n.Fragment,null,r.a.createElement(y.a.Item,{eventKey:"44",as:u.b,to:"update-cod-payment-status"},"Update COD's Payment Status"),r.a.createElement(y.a.Item,{eventKey:"45",as:u.b,to:"view-cod"},"View COD's")))))),r.a.createElement(f.a,null,r.a.createElement("h6",{className:"text-center text-white mb-0 d-lg-flex align-items-center d-none"}," ","Hello, ".concat(this.state.currentUser.firstName)," "),r.a.createElement(f.a.Link,{onClick:this.onLogOut},"Log out")))),r.a.createElement(b.a,{fluid:!0},r.a.createElement(h.b,{path:"/sign-in",component:ue}),r.a.createElement(pe,{roles:["admin","manager"],path:"/",exact:!0,component:ee}),r.a.createElement(pe,{roles:["admin","manager"],path:"/add-operator",exact:!0,component:V}),r.a.createElement(pe,{roles:["admin","manager"],path:"/edit-operator",exact:!0,component:H}),r.a.createElement(pe,{roles:["admin","manager"],path:"/view-operator",exact:!0,component:ee}),r.a.createElement(pe,{roles:["admin","manager"],path:"/operator-operations",exact:!0,component:de}),r.a.createElement(pe,{roles:["admin","manager"],path:"/add-design",exact:!0,component:te}),r.a.createElement(pe,{roles:["admin","manager"],path:"/edit-design",exact:!0,component:ae}),r.a.createElement(pe,{roles:["admin","manager"],path:"/view-design",exact:!0,component:le}),r.a.createElement(pe,{roles:["admin","manager"],path:"/add-operations",exact:!0,component:ie}),r.a.createElement(pe,{roles:["admin","manager"],path:"/view-operations",exact:!0,component:me}),r.a.createElement(pe,{roles:["admin","cleo"],path:"/print-cod",exact:!0,component:Ce}),r.a.createElement(pe,{roles:["admin","cleo"],path:"/add-cod",exact:!0,component:ye}),r.a.createElement(pe,{roles:["admin","cleo"],path:"/edit-cod",exact:!0,component:ve}),r.a.createElement(pe,{roles:["admin"],path:"/update-cod-payment-status",exact:!0,component:Oe}),r.a.createElement(pe,{roles:["admin"],path:"/view-cod",exact:!0,component:Ae})))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var we=a(52),ke=a(171),De=a(168),Te=a.n(De),Me=a(169),Ne=a(170),Ie=a.n(Ne),je={count:0},xe=Object(we.c)({counter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INCREMENT":return Object(C.a)({},e,{count:e.count+t.payload});case"DECREMENT":return Object(C.a)({},e,{count:e.count-t.payload});default:return e}}}),Fe=Object(we.d)(xe,Object(we.a)(Me.a,Te.a));s.a.render(r.a.createElement(ke.a,{store:Fe},r.a.createElement(u.a,null,r.a.createElement(Se,null),r.a.createElement((function(e){return Object(Q.usePromiseTracker)().promiseInProgress&&r.a.createElement("div",{style:{width:"100%",height:"100vh",display:"flex",justifyContent:"center",alignItems:"center",position:"fixed",top:0,left:0,background:"rgba(0, 0, 0, .2)",zIndex:10}},r.a.createElement(Ie.a,{type:"Bars",color:"#343a40",height:80,width:100}))}),null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[173,1,2]]]);
//# sourceMappingURL=main.93a6ff31.chunk.js.map